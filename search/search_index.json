{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to Py-Swift Wiki","text":""},{"location":"setup/","title":"setup-install","text":"<p>Add Brew Tap</p> <pre><code>brew tap PythonSwiftLink/tools\n</code></pre>"},{"location":"setup/#psproject","title":"PSProject","text":"<p>Install PSProject</p> <pre><code>brew install psproject\n</code></pre> <p>Upgrade PSProject</p> <pre><code>brew update\nbrew upgrade --formula psproject\n</code></pre>"},{"location":"project/kivy/buildozer-integration/","title":"Buildozer Integration","text":""},{"location":"project/kivy/buildozer-integration/#overview","title":"Overview","text":"<p>PSProject supports Android builds through Buildozer integration. This guide explains how to initialize a project with Buildozer configuration and manage dependencies across both iOS (via psproject) and Android (via Buildozer) platforms using a unified <code>pyproject.toml</code> file.</p> <p>The <code>toml2spec</code> tool (explained in detail below) enables you to manage all configuration in <code>pyproject.toml</code> and export it to Buildozer's <code>buildozer.spec</code> format when needed.</p>"},{"location":"project/kivy/buildozer-integration/#getting-started","title":"Getting Started","text":""},{"location":"project/kivy/buildozer-integration/#initialize-project-with-buildozer-support","title":"Initialize Project with Buildozer Support","text":"<p>PSProject can initialize a project with Buildozer configuration included:</p> <p>Create a new project with Buildozer support with following option added</p> <pre><code>--buildozer path/to/existing/buildozer.spec\n</code></pre> <p>This creates a project structure with: - Standard <code>pyproject.toml</code> for project metadata and dependencies - Buildozer configuration sections under <code>[tool.buildozer]</code> - Development dependencies including Buildozer</p> <p>Import existing Buildozer spec</p> <p>If you have an existing <code>buildozer.spec</code> file, you can import its configuration: <pre><code>psproject init MyApp --buildozer path/to/existing/buildozer.spec\n</code></pre></p>"},{"location":"project/kivy/buildozer-integration/#project-structure","title":"Project Structure","text":"<p>After initialization, your project structure will look like:</p> <pre><code>MyApp/\n\u251c\u2500\u2500 pyproject.toml          # Unified project configuration\n\u251c\u2500\u2500 main.py                 # Your application entry point\n\u251c\u2500\u2500 project_dist/\n\u2502   \u251c\u2500\u2500 android/\n\u2502   \u2502   \u2514\u2500\u2500 .buildozer/\n\u2502   \u2502       \u2514\u2500\u2500 buildozer.spec  # Generated Buildozer spec\n\u2502   \u2514\u2500\u2500 xcode/              # iOS project (after xcode creation)\n</code></pre>"},{"location":"project/kivy/buildozer-integration/#installing-toml2spec-tool","title":"Installing toml2spec Tool","text":"<p>The <code>toml2spec</code> tool bridges <code>pyproject.toml</code> and <code>buildozer.spec</code>, allowing you to manage configuration in TOML format and export to Buildozer's spec format.</p> <p>Install toml2spec as a uv tool</p> <pre><code>uv tool install toml2spec\n</code></pre> <p>What is a uv tool?</p> <p>UV tools are globally available command-line applications installed in an isolated environment. They're accessible from anywhere on your system without activating a virtual environment.</p> <p>Alternative: Install in project environment</p> <p>If you prefer to install it within your project's virtual environment: <pre><code>uv add --dev toml2spec\nuv run toml2spec --help\n</code></pre></p>"},{"location":"project/kivy/buildozer-integration/#verify-installation","title":"Verify Installation","text":"<pre><code># Check if toml2spec is available\ntoml2spec --version\n\n# View help\ntoml2spec --help\n</code></pre>"},{"location":"project/kivy/buildozer-integration/#configuration-structure","title":"Configuration Structure","text":""},{"location":"project/kivy/buildozer-integration/#pyprojecttoml-with-buildozer-sections","title":"pyproject.toml with Buildozer Sections","text":"<p>When using <code>--buildozer</code>, your <code>pyproject.toml</code> will include Buildozer configuration under <code>[tool.buildozer]</code>:</p> pyproject.toml<pre><code>[project]\nname = \"MyApp\"\nversion = \"0.1.0\"\ndescription = \"My cross-platform Kivy application\"\nreadme = \"README.md\"\nauthors = [\n    { name = \"Your Name\", email = \"you@example.com\" }\n]\nrequires-python = \"&gt;=3.13\"\ndependencies = [\n    \"kivy&gt;=2.3.1\",\n    \"pillow&gt;=10.0.0\",\n    \"requests&gt;=2.31.0\",\n]\n\n[project.scripts]\nmyapp = \"myapp:main\"\n\n[build-system]\nrequires = [\"uv_build&gt;=0.9.2,&lt;0.10.0\"]\nbuild-backend = \"uv_build\"\n\n[dependency-groups]\ndev = [\n    \"buildozer&gt;=1.5.0\",\n    \"toml2spec&gt;=0.1.0\",\n]\niphoneos = []\n\n[tool.psproject]\napp_name = \"MyApp\"\nbackends = []\ncythonized = false\nextra_index = []\npip_install_app = false\n\n[tool.psproject.ios]\nbackends = []\nextra_index = [\n    \"https://pypi.anaconda.org/beeware/simple\",\n    \"https://pypi.anaconda.org/pyswift/simple\",\n    \"https://pypi.anaconda.org/kivyschool/simple\"\n]\n\n[tool.psproject.ios.info_plist]\n\n[tool.psproject.ios.swift_packages]\n\n[tool.psproject.macos]\nbackends = []\nextra_index = []\n\n[tool.psproject.macos.info_plist]\n\n[tool.psproject.macos.swift_packages]\n\n[tool.psproject.swift_packages]\n\n# Buildozer configuration starts here\n[tool.buildozer.app]\ntitle = \"MyApp\"\npackage_name = \"myapp\"\npackage_domain = \"org.example\"\n\n# Source configuration\nsource_dir = \".\"\nsource_include_exts = [\"py\", \"png\", \"jpg\", \"kv\", \"atlas\"]\nsource_exclude_dirs = [\"tests\", \"bin\", \"venv\", \".venv\", \"project_dist\"]\n\n# Version info\nversion = \"0.1.0\"\nversion_regex = \"__version__ = ['\\\"](.+?)['\\\"]\"\nversion_filename = \"%(source_dir)s/main.py\"\n\n# Requirements for p4a/buildozer-specific needs\n# Python dependencies should be in [project.dependencies] instead\nrequirements = python3,android\n\n# Application settings\norientation = \"portrait\"\nfullscreen = 0\npresplash_filename = \"%(source_dir)s/data/presplash.png\"\nicon_filename = \"%(source_dir)s/data/icon.png\"\n\n[tool.buildozer.android]\n# Android API configuration\napi = 33\nminapi = 21\nndk = 25b\n\n# Build configuration\naccept_sdk_license = true\narchs = [\"arm64-v8a\", \"armeabi-v7a\"]\n\n# Permissions\npermissions = [\n    \"INTERNET\",\n    \"ACCESS_NETWORK_STATE\",\n]\n\n[tool.buildozer.android.gradle]\n# Gradle dependencies (if needed)\ndependencies = []\n\n[tool.buildozer]\n# Build output\nlog_level = 2\nwarn_on_root = 1\n</code></pre>"},{"location":"project/kivy/buildozer-integration/#key-differences-from-traditional-buildozerspec","title":"Key Differences from Traditional buildozer.spec","text":"<p>Dependency Management Changes</p> <p>Traditional buildozer.spec: <pre><code>[app]\nrequirements = python3,kivy,pillow,requests\n</code></pre></p> <p>With pyproject.toml: <pre><code>[project]\ndependencies = [\n    \"kivy&gt;=2.3.1\",\n    \"pillow&gt;=10.0.0\",\n    \"requests&gt;=2.31.0\",\n]\n\n[tool.buildozer.app]\n# Only platform-specific requirements\nrequirements = python3,android\n</code></pre></p> <p>Section Naming Convention</p> <p>Buildozer spec sections are converted to TOML tables:</p> buildozer.spec pyproject.toml <code>[app]</code> <code>[tool.buildozer.app]</code> <code>[buildozer]</code> <code>[tool.buildozer]</code> <code>[app:android]</code> <code>[tool.buildozer.android]</code> <code>[app:android.gradle]</code> <code>[tool.buildozer.android.gradle]</code>"},{"location":"project/kivy/buildozer-integration/#dependency-management","title":"Dependency Management","text":""},{"location":"project/kivy/buildozer-integration/#python-package-dependencies","title":"Python Package Dependencies","text":"<p>All Python packages that can be installed via pip should be listed in <code>[project.dependencies]</code>:</p> <pre><code>[project]\ndependencies = [\n    \"kivy&gt;=2.3.1\",\n    \"kivymd&gt;=1.1.1\",\n    \"pillow&gt;=10.0.0\",\n    \"requests&gt;=2.31.0\",\n    \"firebase-admin&gt;=6.0.0\",\n]\n</code></pre>"},{"location":"project/kivy/buildozer-integration/#platform-specific-requirements","title":"Platform-Specific Requirements","text":"<p>Keep only platform-specific requirements in <code>[tool.buildozer.app]</code>:</p> <pre><code>[tool.buildozer.app]\n# Platform-specific or non-pip requirements\nrequirements = python3,android,openssl,libffi\n</code></pre> <p>Common Platform Requirements</p> <ul> <li><code>python3</code> - Python interpreter</li> <li><code>android</code> - Android support package</li> <li><code>hostpython3</code> - Build-time Python</li> <li><code>openssl</code> - SSL/TLS support</li> <li><code>libffi</code> - Foreign function interface</li> <li><code>sdl2</code> - Simple DirectMedia Layer</li> </ul> <p>These are p4a (python-for-android) recipes, not pip packages.</p>"},{"location":"project/kivy/buildozer-integration/#development-dependencies","title":"Development Dependencies","text":"<p>Tools like Buildozer and toml2spec should be development dependencies:</p> <pre><code>[project.optional-dependencies]\ndev = [\n    \"buildozer&gt;=1.5.0\",\n    \"toml2spec&gt;=0.1.0\",\n    \"cython&gt;=3.0.0\",\n]\n</code></pre>"},{"location":"project/kivy/buildozer-integration/#exporting-to-buildozerspec","title":"Exporting to buildozer.spec","text":"<p>After modifying your <code>pyproject.toml</code>, export the configuration to <code>buildozer.spec</code>:</p> <p>Export configuration</p> <pre><code>cd MyApp\nuv run toml2spec pyproject.toml project_dist/android/.buildozer/buildozer.spec\n</code></pre>"},{"location":"project/kivy/buildozer-integration/#what-toml2spec-does","title":"What toml2spec Does","text":"<ol> <li>Reads <code>pyproject.toml</code> configuration</li> <li>Merges <code>[project.dependencies]</code> with <code>[tool.buildozer.app]</code> requirements</li> <li>Converts TOML format to INI format</li> <li>Generates a complete <code>buildozer.spec</code> file</li> </ol> <p>Dependency Merging</p> <p>Input (pyproject.toml): <pre><code>[project]\ndependencies = [\"kivy&gt;=2.3.1\", \"pillow&gt;=10.0.0\"]\n\n[tool.buildozer.app]\nrequirements = python3,android\n</code></pre></p> <p>Output (buildozer.spec): <pre><code>[app]\nrequirements = python3,android,kivy,pillow\n</code></pre></p>"},{"location":"project/kivy/buildozer-integration/#workflow","title":"Workflow","text":""},{"location":"project/kivy/buildozer-integration/#typical-development-workflow","title":"Typical Development Workflow","text":"<ol> <li> <p>Initialize project with Buildozer support: <pre><code>psproject init MyApp --buildozer\ncd MyApp\n</code></pre></p> </li> <li> <p>Install development tools: <pre><code>uv tool install toml2spec\nuv sync --all-extras\n</code></pre></p> </li> <li> <p>Develop your application: main.py<pre><code>from kivy.app import App\n\nclass MyApp(App):\n    def build(self):\n        return Label(text='Hello World')\n\nif __name__ == '__main__':\n    MyApp().run()\n</code></pre></p> </li> <li> <p>Add dependencies to pyproject.toml: <pre><code>[project]\ndependencies = [\n    \"kivy&gt;=2.3.1\",\n    \"requests&gt;=2.31.0\",  # New dependency\n]\n</code></pre></p> </li> <li> <p>Export to buildozer.spec: <pre><code>uv run toml2spec pyproject.toml project_dist/android/.buildozer/buildozer.spec\n</code></pre></p> </li> <li> <p>Build for Android: <pre><code>cd project_dist/android\nbuildozer android debug\n</code></pre></p> </li> <li> <p>Build for iOS: <pre><code>psproject create xcode\npsproject update site-packages\n# Open Xcode and build\n</code></pre></p> </li> </ol>"},{"location":"project/kivy/buildozer-integration/#continuous-integration","title":"Continuous Integration","text":"<p>For CI/CD pipelines, automate the export step:</p> .github/workflows/build.yml<pre><code>- name: Export buildozer configuration\n  run: |\n    uv tool install toml2spec\n    uv run toml2spec pyproject.toml project_dist/android/.buildozer/buildozer.spec\n\n- name: Build Android APK\n  run: |\n    cd project_dist/android\n    buildozer android debug\n</code></pre>"},{"location":"project/kivy/buildozer-integration/#complete-example","title":"Complete Example","text":""},{"location":"project/kivy/buildozer-integration/#full-pyprojecttoml-with-buildozer","title":"Full pyproject.toml with Buildozer","text":"pyproject.toml<pre><code>[project]\nname = \"MyKivyApp\"\nversion = \"1.0.0\"\ndescription = \"A cross-platform Kivy application\"\nreadme = \"README.md\"\nauthors = [\n    { name = \"Your Name\", email = \"you@example.com\" }\n]\nrequires-python = \"&gt;=3.13\"\ndependencies = [\n    \"kivy&gt;=2.3.1\",\n    \"kivymd&gt;=1.1.1\",\n    \"pillow&gt;=10.0.0\",\n    \"requests&gt;=2.31.0\",\n    \"python-dotenv&gt;=1.0.0\",\n]\n\n[project.scripts]\nmykivyapp = \"mykivyapp:main\"\n\n[build-system]\nrequires = [\"uv_build&gt;=0.9.2,&lt;0.10.0\"]\nbuild-backend = \"uv_build\"\n\n[dependency-groups]\ndev = [\n    \"buildozer&gt;=1.5.0\",\n    \"toml2spec&gt;=0.1.0\",\n    \"pytest&gt;=7.0.0\",\n]\niphoneos = []\n\n[tool.psproject]\napp_name = \"MyKivyApp\"\nbackends = []\ncythonized = false\nextra_index = []\npip_install_app = false\n\n[tool.psproject.ios]\nbackends = []\nextra_index = [\n    \"https://pypi.anaconda.org/beeware/simple\",\n    \"https://pypi.anaconda.org/pyswift/simple\",\n    \"https://pypi.anaconda.org/kivyschool/simple\"\n]\n\n[tool.psproject.ios.info_plist]\n\n[tool.psproject.ios.swift_packages]\n\n[tool.psproject.macos]\nbackends = []\nextra_index = []\n\n[tool.psproject.macos.info_plist]\n\n[tool.psproject.macos.swift_packages]\n\n[tool.psproject.swift_packages]\n\n# Buildozer Configuration\n[tool.buildozer.app]\ntitle = \"My Kivy App\"\npackage_name = \"mykivyapp\"\npackage_domain = \"com.example\"\n\nsource_dir = \".\"\nsource_include_exts = [\"py\", \"png\", \"jpg\", \"kv\", \"atlas\", \"ttf\"]\nsource_exclude_dirs = [\"tests\", \"bin\", \".buildozer\", \"venv\", \".venv\", \"project_dist\"]\nsource_exclude_patterns = [\"*.pyc\", \"*.pyo\", \"__pycache__/*\"]\n\nversion = \"1.0.0\"\nversion_regex = \"__version__ = ['\\\"](.+?)['\\\"]\"\nversion_filename = \"%(source_dir)s/main.py\"\n\n# Platform-specific requirements only\nrequirements = python3,android,openssl,libffi\n\norientation = \"portrait\"\nfullscreen = 0\n\n# Assets\npresplash_filename = \"%(source_dir)s/assets/presplash.png\"\nicon_filename = \"%(source_dir)s/assets/icon.png\"\npresplash_color = \"#FFFFFF\"\n\n[tool.buildozer.android]\n# API levels\napi = 33\nminapi = 21\nndk = 25b\n\n# Build settings\naccept_sdk_license = true\narchs = [\"arm64-v8a\", \"armeabi-v7a\"]\n\n# Permissions\npermissions = [\n    \"INTERNET\",\n    \"ACCESS_NETWORK_STATE\",\n    \"WRITE_EXTERNAL_STORAGE\",\n    \"READ_EXTERNAL_STORAGE\",\n]\n\n# Features\nfeatures = [\"android.hardware.camera\"]\n\n# Metadata\nandroid_entrypoint = \"org.kivy.android.PythonActivity\"\nandroid_apptheme = \"@android:style/Theme.NoTitleBar\"\n\n[tool.buildozer.android.gradle]\ndependencies = [\n    \"com.google.android.material:material:1.8.0\",\n]\n\n[tool.buildozer]\nlog_level = 2\nwarn_on_root = 1\n</code></pre>"},{"location":"project/kivy/buildozer-integration/#build-commands","title":"Build Commands","text":"<pre><code># Export to buildozer.spec\nuv run toml2spec pyproject.toml project_dist/android/.buildozer/buildozer.spec\n\n# Build Android debug APK\ncd project_dist/android\nbuildozer android debug\n\n# Build Android release APK\nbuildozer android release\n\n# Deploy to connected device\nbuildozer android deploy run\n</code></pre>"},{"location":"project/kivy/buildozer-integration/#migration-from-existing-buildozerspec","title":"Migration from Existing buildozer.spec","text":"<p>If you have an existing Buildozer project:</p>"},{"location":"project/kivy/buildozer-integration/#step-1-initialize-with-existing-spec","title":"Step 1: Initialize with existing spec","text":"<pre><code>psproject init MyApp --buildozer path/to/old/buildozer.spec\n</code></pre>"},{"location":"project/kivy/buildozer-integration/#step-2-move-pip-requirements","title":"Step 2: Move pip requirements","text":"<p>Identify pip-installable packages in your old spec:</p> old buildozer.spec<pre><code>[app]\nrequirements = python3,kivy,pillow,requests,kivymd,android\n</code></pre> <p>Move pip packages to <code>pyproject.toml</code>:</p> pyproject.toml<pre><code>[project]\ndependencies = [\n    \"kivy&gt;=2.3.1\",\n    \"pillow&gt;=10.0.0\",\n    \"requests&gt;=2.31.0\",\n    \"kivymd&gt;=1.1.1\",\n]\n\n[tool.buildozer.app]\n# Keep only platform-specific\nrequirements = python3,android\n</code></pre>"},{"location":"project/kivy/buildozer-integration/#step-3-verify-sections","title":"Step 3: Verify sections","text":"<p>Check that all sections from your old spec are present in <code>pyproject.toml</code>:</p> <ul> <li><code>[app]</code> \u2192 <code>[tool.buildozer.app]</code></li> <li><code>[app:android]</code> \u2192 <code>[tool.buildozer.android]</code></li> <li><code>[buildozer]</code> \u2192 <code>[tool.buildozer]</code></li> </ul>"},{"location":"project/kivy/buildozer-integration/#step-4-export-and-test","title":"Step 4: Export and test","text":"<pre><code>uv run toml2spec pyproject.toml project_dist/android/.buildozer/buildozer.spec\ncd project_dist/android\nbuildozer android debug\n</code></pre>"},{"location":"project/kivy/buildozer-integration/#troubleshooting","title":"Troubleshooting","text":""},{"location":"project/kivy/buildozer-integration/#common-issues","title":"Common Issues","text":"<p>Requirements not found</p> <p>Problem: Build fails with \"Could not find X recipe\"</p> <p>Solution: Check if X is a pip package. If yes, move it to <code>[project.dependencies]</code>. If it's a p4a recipe, keep it in <code>[tool.buildozer.app]</code> requirements.</p> <p>Version conflicts</p> <p>Problem: Buildozer complains about version specifiers</p> <p>Solution: <code>toml2spec</code> strips version specifiers when exporting to buildozer.spec. Buildozer will use the version installed by pip from <code>[project.dependencies]</code>.</p> <p>Export path doesn't exist</p> <p>Problem: <code>toml2spec</code> fails because directory doesn't exist</p> <p>Solution: Create the directory first: <pre><code>mkdir -p project_dist/android/.buildozer\nuv run toml2spec pyproject.toml project_dist/android/.buildozer/buildozer.spec\n</code></pre></p>"},{"location":"project/kivy/buildozer-integration/#debugging","title":"Debugging","text":"<p>Enable verbose logging:</p> <pre><code>[tool.buildozer]\nlog_level = 2  # 0=error, 1=info, 2=debug\n</code></pre> <p>Check exported spec:</p> <pre><code>cat project_dist/android/.buildozer/buildozer.spec\n</code></pre>"},{"location":"project/kivy/buildozer-integration/#best-practices","title":"Best Practices","text":"<p>Single Source of Truth</p> <p>Keep all dependency versions in <code>pyproject.toml</code>. Let <code>toml2spec</code> handle the export to <code>buildozer.spec</code>.</p> <p>Version Control</p> <p>Add to <code>.gitignore</code>: <pre><code># Buildozer generated files\n.buildozer/\nbin/\nproject_dist/android/.buildozer/buildozer.spec\n</code></pre></p> <p>Don't commit the generated <code>buildozer.spec</code> - generate it during build from <code>pyproject.toml</code>.</p> <p>Automated Export</p> <p>Add a script to automate export: build.sh<pre><code>#!/bin/bash\nset -e\n\necho \"Exporting buildozer configuration...\"\nuv run toml2spec pyproject.toml project_dist/android/.buildozer/buildozer.spec\n\necho \"Building Android APK...\"\ncd project_dist/android\nbuildozer android debug\n</code></pre></p> <p>Test on Both Platforms</p> <p>Regularly test your app on both iOS and Android to catch platform-specific issues early: <pre><code># Test iOS\npsproject update site-packages\n# Open in Xcode and run\n\n# Test Android\nuv run toml2spec pyproject.toml project_dist/android/.buildozer/buildozer.spec\ncd project_dist/android\nbuildozer android debug deploy run\n</code></pre></p>"},{"location":"project/kivy/buildozer-integration/#reference","title":"Reference","text":""},{"location":"project/kivy/buildozer-integration/#toml2spec-command-options","title":"toml2spec Command Options","text":"<pre><code># Basic usage\ntoml2spec &lt;input_toml&gt; &lt;output_spec&gt;\n\n# With custom section mapping\ntoml2spec --mapping custom_mapping.json pyproject.toml buildozer.spec\n\n# Dry run (don't write file)\ntoml2spec --dry-run pyproject.toml buildozer.spec\n</code></pre>"},{"location":"project/kivy/buildozer-integration/#supported-buildozer-sections","title":"Supported Buildozer Sections","text":"<p>All standard Buildozer sections are supported:</p> <ul> <li><code>[tool.buildozer.app]</code> - Application settings</li> <li><code>[tool.buildozer.android]</code> - Android-specific settings</li> <li><code>[tool.buildozer.android.gradle]</code> - Gradle dependencies</li> <li><code>[tool.buildozer.ios]</code> - iOS settings (use psproject instead)</li> <li><code>[tool.buildozer]</code> - Build settings</li> </ul> <p>iOS Configuration</p> <p>While you can include <code>[tool.buildozer.ios]</code>, psproject handles iOS builds independently. Use <code>[tool.psproject.ios]</code> for iOS configuration instead.</p>"},{"location":"project/kivy/buildozer-integration/#additional-resources","title":"Additional Resources","text":"<ul> <li>PSProject Documentation</li> <li>Buildozer Documentation</li> <li>toml2spec Repository</li> <li>python-for-android Documentation</li> <li>Kivy Documentation</li> </ul>"},{"location":"project/kivy/create/","title":"kivy-project","text":"<p>First create uv project which psproject will use the pyproject.toml as project info</p> <pre><code>psproject init HelloWorld\n</code></pre> <p>cd into the new project - if terminal app only usage</p> <pre><code>cd HelloWorld\n</code></pre> <p>vscode users can instead open the folder by</p> <pre><code>code HelloWorld\n</code></pre> <p>You should now have a HelloWorld/pyproject.toml looking like this:</p> <pre><code>[project]\nname = \"helloworld\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nreadme = \"README.md\"\nauthors = [\n    { name = \"Py-Swift\", email = \"xyz@mail.com\" }\n]\nrequires-python = \"&gt;=3.13\"\ndependencies = []\n\n[project.scripts]\nhelloworld = \"helloworld:main\"\n\n[build-system]\nrequires = [\"uv_build&gt;=0.9.2,&lt;0.10.0\"]\nbuild-backend = \"uv_build\"\n\n[dependency-groups]\niphoneos = []\n\n[tool.psproject]\napp_name = \"HelloWorld\"\nbackends = []\ncythonized = false\nextra_index = []\npip_install_app = false\n\n[tool.psproject.ios]\nbackends = []\nextra_index = [\n    \"https://pypi.anaconda.org/beeware/simple\",\n    \"https://pypi.anaconda.org/pyswift/simple\",\n    \"https://pypi.anaconda.org/kivyschool/simple\"\n]\n\n[tool.psproject.ios.info_plist]\n\n[tool.psproject.ios.swift_packages]\n\n[tool.psproject.macos]\nbackends = []\nextra_index = []\n\n[tool.psproject.macos.info_plist]\n\n[tool.psproject.macos.swift_packages]\n\n[tool.psproject.swift_packages]\n</code></pre> <p>Now change the following properties to run a kivy based app:</p> <pre><code>[project]\nname = \"helloworld\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nreadme = \"README.md\"\nauthors = [\n    { name = \"Py-Swift\", email = \"xyz@mail.com\" }\n]\nrequires-python = \"&gt;=3.13\"\ndependencies = [\n    \"kivy&gt;=2.3.1\",\n]\n\n[project.scripts]\nhelloworld = \"helloworld:main\"\n\n[build-system]\nrequires = [\"uv_build&gt;=0.9.2,&lt;0.10.0\"]\nbuild-backend = \"uv_build\"\n\n[dependency-groups]\niphoneos = []\n\n[tool.psproject]\napp_name = \"HelloWorld\"\nbackends = [\n    \"kivyschool.kivylauncher\"\n]\ncythonized = false\nextra_index = []\npip_install_app = false\n\n[tool.psproject.ios]\nbackends = []\nextra_index = [\n    \"https://pypi.anaconda.org/beeware/simple\",\n    \"https://pypi.anaconda.org/pyswift/simple\",\n    \"https://pypi.anaconda.org/kivyschool/simple\"\n]\n\n[tool.psproject.ios.info_plist]\n\n[tool.psproject.ios.swift_packages]\n\n[tool.psproject.macos]\nbackends = []\nextra_index = []\n\n[tool.psproject.macos.info_plist]\n\n[tool.psproject.macos.swift_packages]\n\n[tool.psproject.swift_packages]\n</code></pre> <p>To create the xcode project, type the following command</p> <pre><code>psproject create xcode\n</code></pre> <p>Copy your main Python file to the Xcode project</p> <p>After creating the Xcode project, you need to copy your <code>__main__.py</code> (main entry point) to the app directory: <pre><code>cp src/helloworld/__main__.py project_dist/xcode/app/\n</code></pre></p> <p>Replace <code>helloworld</code> with your actual app name. This file will be bundled with your iOS app and serves as the entry point for your Python application.</p> <p>To update the xcode project's site-packages, type the following command</p> <pre><code>psproject update site-packages\n</code></pre> <p>Customize mobile vs desktop settings</p> <p>The <code>project_dist/xcode/app/__main__.py</code> can be different from <code>src/helloworld/__main__.py</code>! This allows you to run your app with different parameters or configurations for mobile vs desktop:</p> <p>Desktop version (<code>src/helloworld/__main__.py</code>): <pre><code>from kivy.config import Config\nfrom app import main\n\n# Set window size for desktop\nConfig.set('graphics', 'width', '1280')\nConfig.set('graphics', 'height', '720')\n\nif __name__ == \"__main__\":\n    main()\n</code></pre></p> <p>Mobile version (<code>project_dist/xcode/app/__main__.py</code>): <pre><code>from app import main\n\nif __name__ == \"__main__\":\n    main()\n</code></pre></p> <p>This separation lets you optimize settings, features, and UI layouts specifically for each platform without cluttering your code with conditional checks.</p>"},{"location":"project/kivy/cythonized-project/","title":"Cythonized Project","text":"<p>This guide shows how to create a cythonized project where Python files are automatically converted to Cython (<code>.pyx</code>) and compiled to native code for better performance.</p>"},{"location":"project/kivy/cythonized-project/#what-is-a-cythonized-project","title":"What is a Cythonized Project?","text":"<p>A cythonized project automatically: - Converts all <code>.py</code> files to <code>.pyx</code> (Cython source files) - Compiles them to native C extensions - Generates local wheel packages for all target platforms - Serves them via a local simple package index</p> <p>This provides significant performance improvements while maintaining Python compatibility.</p>"},{"location":"project/kivy/cythonized-project/#creating-a-cythonized-project","title":"Creating a Cythonized Project","text":"<p>Initialize a new cythonized project</p> <pre><code>psproject init MyCythonApp --cythonized\n</code></pre> <p>This creates a new project with the <code>cythonized</code> key set to <code>true</code> in <code>pyproject.toml</code>.</p> <p>Navigate to the project directory</p> <pre><code>cd MyCythonApp\n</code></pre> <p>Or open in VS Code</p> <pre><code>code MyCythonApp\n</code></pre>"},{"location":"project/kivy/cythonized-project/#project-structure","title":"Project Structure","text":"<p>Your pyproject.toml will include the cythonized setting:</p> <pre><code>[tool.psproject]\ncythonized = true\nversion = \"0.1.0\"\n# ... other settings\n</code></pre> <p>When <code>cythonized = true</code>, the build system will:</p> <ol> <li>Convert all <code>.py</code> files to <code>.pyx</code> files</li> <li>Compile them using Cython for each target platform</li> <li>Package them as wheel files</li> <li>Index them in a local simple package repository</li> </ol>"},{"location":"project/kivy/cythonized-project/#build-workflow","title":"Build Workflow","text":""},{"location":"project/kivy/cythonized-project/#step-1-update-the-app-package","title":"Step 1: Update the App Package","text":"<p>After making changes to your Python code:</p> <p>Build and package the app as a wheel</p> <pre><code>psproject update app\n</code></pre> <p>This command: - Converts <code>.py</code> \u2192 <code>.pyx</code> files - Cythonizes the code for all platforms (iOS arm64, simulator x86_64/arm64, etc.) - Generates wheel files (.whl) for each platform - Places them in the local package repository</p>"},{"location":"project/kivy/cythonized-project/#step-2-update-the-simple-index","title":"Step 2: Update the Simple Index","text":"<p>Generate/update the local package index</p> <pre><code>psproject update simple\n</code></pre> <p>This command: - Scans all wheel files in the local repository - Generates a PEP 503 simple repository index - Makes packages available for pip installation</p>"},{"location":"project/kivy/cythonized-project/#step-3-create-xcode-project","title":"Step 3: Create Xcode Project","text":"<p>Generate the Xcode project</p> <pre><code>psproject create xcode\n</code></pre> <p>The Xcode project will be configured to automatically install the latest wheel during build.</p>"},{"location":"project/kivy/cythonized-project/#step-4-build-in-xcode","title":"Step 4: Build in Xcode","text":"<p>When you build in Xcode:</p> <ol> <li>Pre-build script runs <code>pip install</code> from the local simple index</li> <li>Latest wheel of your cythonized app is installed into site-packages</li> <li>Native compiled code runs on the device/simulator</li> </ol>"},{"location":"project/kivy/cythonized-project/#complete-example","title":"Complete Example","text":"<pre><code># Create a new cythonized project\npsproject init MyFastApp --cythonized\n\n# Navigate to the project\ncd MyFastApp\n</code></pre>"},{"location":"project/kivy/cythonized-project/#add-your-python-code","title":"Add your Python code","text":"<pre><code>def calculate_fibonacci(n: int) -&gt; int:\n    \"\"\"Calculate fibonacci number - will be cythonized for speed.\"\"\"\n    if n &lt;= 1:\n        return n\n    return calculate_fibonacci(n - 1) + calculate_fibonacci(n - 2)\n\ndef main():\n    result = calculate_fibonacci(30)\n    print(f\"Fibonacci(30) = {result}\")\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>"},{"location":"project/kivy/cythonized-project/#build-the-cythonized-wheel","title":"Build the cythonized wheel","text":"<pre><code>psproject update app\n</code></pre>"},{"location":"project/kivy/cythonized-project/#update-the-package-index","title":"Update the package index","text":"<pre><code>psproject update simple\n</code></pre>"},{"location":"project/kivy/cythonized-project/#create-xcode-project","title":"Create Xcode project","text":"<pre><code>psproject create xcode\n</code></pre>"},{"location":"project/kivy/cythonized-project/#development-workflow","title":"Development Workflow","text":""},{"location":"project/kivy/cythonized-project/#making-code-changes","title":"Making Code Changes","text":"<p>When you modify your Python code:</p> <pre><code># 1. Edit your .py files\nvim my_module.py\n\n# 2. Rebuild the cythonized package\npsproject update app\n\n# 3. Update the index\npsproject update simple\n\n# 4. Rebuild in Xcode (or clean build)\n# The new wheel will be automatically installed\n</code></pre>"},{"location":"project/kivy/cythonized-project/#platform-specific-builds","title":"Platform-Specific Builds","text":"<p>The cythonization process creates wheels for:</p> <ul> <li>iOS Device (arm64)</li> <li>iOS Simulator (arm64 for M1+ Macs)</li> <li>iOS Simulator (x86_64 for Intel Macs)</li> </ul> <p>Each platform gets optimized native code.</p>"},{"location":"project/kivy/cythonized-project/#configuration-options","title":"Configuration Options","text":"<p>Example pyproject.toml for a cythonized Kivy app:</p> <pre><code>[project]\nname = \"MyFastApp\"\nversion = \"0.1.0\"\nrequires-python = \"&gt;=3.10\"\ndependencies = [\n    \"kivy&gt;=2.3.1\",\n]\n\n[build-system]\nrequires = [\"uv&gt;=0.9.2,&lt;0.10.0\"]\nbuild-backend = \"uv\"\n\n[tool.psproject]\nversion = \"0.1.0\"\ncythonized = true  # Enable Cython compilation\n\n[tool.psproject.app]\nmain_script = \"main.py\"\nrequirements = []\n\n[tool.psproject.ios]\nbundle_identifier = \"com.example.myfastapp\"\ndeployment_target = \"13.0\"\n\n[tool.psproject.swift_packages.PythonSwiftLink]\nexact = \"0.1.102\"\n</code></pre>"},{"location":"project/kivy/cythonized-project/#performance-benefits","title":"Performance Benefits","text":"<p>Cythonized code typically provides:</p> <ul> <li>2-10x faster execution for computational code</li> <li>Reduced memory overhead</li> <li>Native C performance for tight loops and calculations</li> <li>Type safety when using type hints</li> </ul> <p>Example performance comparison:</p> <pre><code># Pure Python (main.py)\ndef calculate_sum(n: int) -&gt; int:\n    total = 0\n    for i in range(n):\n        total += i\n    return total\n\n# After cythonization \u2192 native C code\n# Runs 5-10x faster on device!\n</code></pre>"},{"location":"project/kivy/cythonized-project/#automatic-build-integration","title":"Automatic Build Integration","text":"<p>The Xcode project includes a build phase that:</p> <pre><code># Pre-build script (automatically added)\npip install --index-url file:///path/to/simple MyFastApp\n</code></pre> <p>This ensures: - \u2705 Latest cythonized wheel is always installed - \u2705 No manual site-packages management needed - \u2705 Platform-specific optimized code is used</p>"},{"location":"project/kivy/cythonized-project/#troubleshooting","title":"Troubleshooting","text":""},{"location":"project/kivy/cythonized-project/#wheel-not-found","title":"Wheel Not Found","text":"<p>If <code>pip install</code> can't find your wheel:</p> <pre><code># Rebuild the wheel\npsproject update app\n\n# Regenerate the index\npsproject update simple\n\n# Verify the index exists\nls -la simple/\n</code></pre>"},{"location":"project/kivy/cythonized-project/#cython-compilation-errors","title":"Cython Compilation Errors","text":"<p>If you get Cython errors:</p> <pre><code># Check Python syntax is valid\npython -m py_compile main.py\n\n# Try disabling cythonized temporarily\n# Edit pyproject.toml: cythonized = false\n\n# Then re-enable after fixing issues\n</code></pre>"},{"location":"project/kivy/cythonized-project/#platform-mismatch","title":"Platform Mismatch","text":"<p>Make sure you're building for the right platform:</p> <pre><code># Check current platform wheels\nls *.whl\n\n# Should see files like:\n# MyApp-0.1.0-cp313-cp313-ios_13_0_iphoneos_arm64.whl\n# MyApp-0.1.0-cp313-cp313-ios_13_0_iphonesimulator_arm64.whl\n# MyApp-0.1.0-cp313-cp313-ios_13_0_iphonesimulator_x86_64.whl\n</code></pre>"},{"location":"project/kivy/cythonized-project/#advanced-type-hints-for-performance","title":"Advanced: Type Hints for Performance","text":"<p>Use Python type hints to get maximum Cython performance:</p> <pre><code># my_fast_module.py\ndef process_data(data: list[int]) -&gt; int:\n    \"\"\"Cython will optimize this with type information.\"\"\"\n    total: int = 0\n    value: int\n\n    for value in data:\n        total += value * 2\n\n    return total\n</code></pre> <p>After cythonization, this becomes highly optimized C code!</p>"},{"location":"project/kivy/cythonized-project/#pure-python-mode","title":"Pure Python Mode","text":"<p>Cython supports Pure Python Mode, which allows you to write Python code that remains valid Python but includes type annotations and hints that Cython uses for optimization. This is ideal for projects that need to run both as interpreted Python and as compiled extensions.</p>"},{"location":"project/kivy/cythonized-project/#three-approaches-to-pure-python-mode","title":"Three Approaches to Pure Python Mode","text":""},{"location":"project/kivy/cythonized-project/#1-using-the-cython-module-decorators-and-magic-attributes","title":"1. Using the <code>cython</code> Module (Decorators and Magic Attributes)","text":"<p>Import the <code>cython</code> module and use decorators to add type information:</p> <pre><code>import cython\n\n# Declare typed variables\n@cython.locals(x=cython.int, y=cython.int)\ndef add_numbers(x, y):\n    return x + y\n\n# Create a cdef class (extension type)\n@cython.cclass\nclass FastCalculator:\n    # Declare attributes\n    value: cython.int\n\n    def __init__(self, initial_value: int):\n        self.value = initial_value\n\n    @cython.cfunc  # C function (internal use)\n    @cython.returns(cython.int)\n    def _internal_calc(self, n: cython.int) -&gt; cython.int:\n        return self.value * n\n\n    @cython.ccall  # cpdef function (callable from Python and C)\n    def calculate(self, n: cython.int) -&gt; cython.int:\n        return self._internal_calc(n) + self.value\n\n# Check if code is compiled\nif cython.compiled:\n    print(\"Running as compiled extension!\")\nelse:\n    print(\"Running as interpreted Python\")\n</code></pre> <p>When run as Python, this code uses the fake <code>cython</code> module (from <code>Cython.Shadow</code>). When compiled, it becomes optimized C code.</p>"},{"location":"project/kivy/cythonized-project/#2-using-pep-484-type-annotations","title":"2. Using PEP-484 Type Annotations","text":"<p>Use standard Python type hints with <code>cython</code> types:</p> <pre><code>import cython\n\ndef process_array(data: list[int], multiplier: cython.int) -&gt; int:\n    \"\"\"Process array with Cython optimizations.\"\"\"\n    total: cython.int = 0\n    value: cython.int\n\n    for value in data:\n        total += value * multiplier\n\n    return total\n\n@cython.cclass\nclass Point:\n    x: cython.double\n    y: cython.double\n\n    def __init__(self, x: float, y: float):\n        self.x = x\n        self.y = y\n\n    def distance(self) -&gt; cython.double:\n        return cython.sqrt(self.x * self.x + self.y * self.y)\n</code></pre> <p>Type Annotation Benefits</p> <ul> <li>Works with static type checkers (mypy, pyright)</li> <li>Compatible with IDE autocomplete</li> <li>Provides Cython optimizations when compiled</li> <li>Remains valid Python when interpreted</li> </ul>"},{"location":"project/kivy/cythonized-project/#3-using-augmenting-pxd-files","title":"3. Using Augmenting <code>.pxd</code> Files","text":"<p>Keep your <code>.py</code> file as pure Python and create a matching <code>.pxd</code> file with type declarations:</p> <p>my_module.py (pure Python): <pre><code>def calculate_distance(x1, y1, x2, y2):\n    dx = x2 - x1\n    dy = y2 - y1\n    return (dx * dx + dy * dy) ** 0.5\n\nclass Point:\n    def __init__(self, x, y):\n        self.x = x\n        self.y = y\n\n    def move(self, dx, dy):\n        self.x += dx\n        self.y += dy\n</code></pre></p> <p>my_module.pxd (Cython type declarations): <pre><code>cpdef double calculate_distance(double x1, double y1, double x2, double y2)\n\ncdef class Point:\n    cdef public double x, y\n    cpdef move(self, double dx, double dy)\n</code></pre></p> <p>When Cython compiles <code>my_module.py</code>, it reads <code>my_module.pxd</code> and applies the type declarations automatically!</p>"},{"location":"project/kivy/cythonized-project/#practical-example-optimized-math-module","title":"Practical Example: Optimized Math Module","text":"<p>Here's a complete example combining all approaches:</p> <pre><code># fast_math.py\nimport cython\nfrom cython.cimports.libc import math\n\n@cython.cfunc\n@cython.returns(cython.double)\ndef _fast_sqrt(x: cython.double) -&gt; cython.double:\n    \"\"\"Internal C function for square root.\"\"\"\n    if cython.compiled:\n        return math.sqrt(x)\n    else:\n        import math as py_math\n        return py_math.sqrt(x)\n\n@cython.ccall\ndef euclidean_distance(\n    x1: cython.double,\n    y1: cython.double,\n    x2: cython.double,\n    y2: cython.double\n) -&gt; cython.double:\n    \"\"\"Calculate Euclidean distance - optimized when compiled.\"\"\"\n    dx: cython.double = x2 - x1\n    dy: cython.double = y2 - y1\n    return _fast_sqrt(dx * dx + dy * dy)\n\n@cython.cclass\nclass Vector2D:\n    \"\"\"2D vector with Cython optimizations.\"\"\"\n    x: cython.double\n    y: cython.double\n\n    def __init__(self, x: float, y: float):\n        self.x = x\n        self.y = y\n\n    @cython.ccall\n    def magnitude(self) -&gt; cython.double:\n        \"\"\"Calculate vector magnitude.\"\"\"\n        return _fast_sqrt(self.x * self.x + self.y * self.y)\n\n    @cython.ccall\n    def normalize(self) -&gt; None:\n        \"\"\"Normalize the vector in-place.\"\"\"\n        mag: cython.double = self.magnitude()\n        if mag &gt; 0:\n            self.x /= mag\n            self.y /= mag\n\n    def __repr__(self) -&gt; str:\n        return f\"Vector2D({self.x}, {self.y})\"\n\n# This works in both interpreted and compiled mode!\nif __name__ == \"__main__\":\n    v = Vector2D(3.0, 4.0)\n    print(f\"Vector: {v}\")\n    print(f\"Magnitude: {v.magnitude()}\")\n\n    v.normalize()\n    print(f\"Normalized: {v}\")\n\n    dist = euclidean_distance(0, 0, 3, 4)\n    print(f\"Distance: {dist}\")\n</code></pre>"},{"location":"project/kivy/cythonized-project/#available-cython-types","title":"Available Cython Types","text":"<p>When using pure Python mode, you can use these types:</p> <pre><code>import cython\n\n# Integer types\nx: cython.int          # C int\ny: cython.long         # C long\nz: cython.longlong     # C long long\n\n# Unsigned integers\nux: cython.uint        # unsigned int\nuy: cython.ulong       # unsigned long\n\n# Floating point\nf: cython.float        # C float\nd: cython.double       # C double\n\n# Boolean\nb: cython.bint         # C boolean (0/1)\n\n# Python types (for clarity)\npy_int: int            # Python int object\npy_list: list          # Python list object\npy_dict: dict          # Python dict object\n\n# Pointers (advanced)\nptr: cython.p_int      # int*\npptr: cython.pp_int    # int**\n</code></pre>"},{"location":"project/kivy/cythonized-project/#managing-the-gil-global-interpreter-lock","title":"Managing the GIL (Global Interpreter Lock)","text":"<p>For performance-critical sections, you can release the GIL:</p> <pre><code>import cython\n\n@cython.cfunc\n@cython.nogil  # This function can run without the GIL\ndef cpu_intensive_calculation(n: cython.int) -&gt; cython.long:\n    \"\"\"Pure C calculation, no Python objects.\"\"\"\n    result: cython.long = 0\n    i: cython.int\n\n    for i in range(n):\n        result += i * i\n\n    return result\n\ndef process_data(data: list[int]) -&gt; int:\n    \"\"\"Process data, releasing GIL for C operations.\"\"\"\n    result: cython.long\n\n    # Release GIL for the intensive calculation\n    with cython.nogil:\n        result = cpu_intensive_calculation(len(data))\n\n    # GIL automatically reacquired here\n    return int(result)\n</code></pre>"},{"location":"project/kivy/cythonized-project/#using-in-cythonized-projects","title":"Using in Cythonized Projects","text":"<p>When using <code>psproject init MyApp --cythonized</code>, you can write pure Python mode code that:</p> <ol> <li>Runs normally when testing in Python</li> <li>Gets optimized during the cythonization process</li> <li>Maintains compatibility with debugging tools</li> </ol> <p>Example workflow:</p> <pre><code># my_app/calculations.py\nimport cython\n\n@cython.cfunc\n@cython.returns(cython.double)\ndef _calculate_tax(amount: cython.double, rate: cython.double) -&gt; cython.double:\n    return amount * rate\n\n@cython.ccall\ndef process_transaction(amount: float, tax_rate: float) -&gt; dict:\n    \"\"\"Process a transaction with tax calculation.\"\"\"\n    tax: cython.double = _calculate_tax(amount, tax_rate)\n    total: cython.double = amount + tax\n\n    return {\n        'amount': amount,\n        'tax': tax,\n        'total': total,\n        'compiled': cython.compiled\n    }\n\n# When you run: psproject update app\n# This gets converted to .pyx and compiled to native code!\n</code></pre> <p>Pure Python Mode Advantages</p> <ul> <li>\u2705 Code runs without Cython installed (uses fallback)</li> <li>\u2705 Easier debugging with standard Python tools</li> <li>\u2705 Compatible with code coverage tools</li> <li>\u2705 Type hints help with IDE autocomplete</li> <li>\u2705 Gradual optimization (add types where needed)</li> <li>\u2705 Same codebase for development and production</li> </ul> <p>Limitations</p> <p>Some Cython features require <code>.pyx</code> syntax:</p> <ul> <li>C arrays: <code>cdef int arr[100]</code></li> <li>C structs and unions</li> <li>Complex pointer arithmetic</li> <li>Inline C code</li> </ul> <p>For these, you need to write <code>.pyx</code> files directly.</p> <p>Runtime Dependency</p> <p>Pure Python mode code imports <code>cython</code>. To avoid the runtime dependency, add this to your files:</p> <pre><code>try:\n    import cython\nexcept ImportError:\n    class _FakeCython:\n        compiled = False\n        def __getattr__(self, name):\n            return lambda *args, **kwargs: (lambda f: f) if callable(args[0] if args else None) else object\n    cython = _FakeCython()\n</code></pre>"},{"location":"project/kivy/cythonized-project/#best-practices","title":"Best Practices","text":"<ol> <li> <p>Always update both app and simple index:    <pre><code>psproject update app &amp;&amp; psproject update simple\n</code></pre></p> </li> <li> <p>Clean builds after major changes:    <pre><code># In Xcode: Product \u2192 Clean Build Folder\n</code></pre></p> </li> <li> <p>Version your wheels using semantic versioning:    <pre><code>[project]\nversion = \"0.2.0\"  # Increment on changes\n</code></pre></p> </li> <li> <p>Test on device as Cython optimizations differ from simulator</p> </li> <li> <p>Use type hints for better performance optimization</p> </li> </ol> <p>Quick Reference</p> <pre><code># Create cythonized project\npsproject init MyApp --cythonized\n\n# Development cycle\npsproject update app      # Build cythonized wheels\npsproject update simple   # Update package index\n\n# Initial setup\npsproject create xcode    # Create Xcode project\n\n# Then just build in Xcode!\n</code></pre> <p>Platform Dependencies</p> <p>Some packages may not support all iOS platforms. If you encounter issues with a dependency:</p> <ul> <li>Check if it has pre-built wheels for iOS</li> <li>Consider using pure Python alternatives</li> <li>Report compatibility issues to the package maintainer</li> </ul> <p>Comparison: Standard vs Cythonized</p> <p>Standard Project: - <code>.py</code> files copied directly to site-packages - Interpreted at runtime - Easy to debug - Slower performance</p> <p>Cythonized Project: - <code>.py</code> \u2192 <code>.pyx</code> \u2192 compiled C extensions - Native machine code execution - Better performance (2-10x faster) - Requires rebuild on code changes</p>"},{"location":"project/kivy/local-wheels/","title":"Local Wheels Guide","text":"<p>This guide explains how to create and use local wheel packages when PyPI packages have issues or when you need custom versions for your iOS app.</p>"},{"location":"project/kivy/local-wheels/#why-local-wheels","title":"Why Local Wheels?","text":"<p>Local wheels are useful when:</p> <ul> <li>\ud83d\udd27 PyPI and GitHub versions are out of sync</li> <li>\ud83d\udc1b A package has iOS-specific issues that need patching</li> <li>\ud83d\udce6 You need a specific version not available on PyPI</li> <li>\u26a1 You want to host custom-built wheels for faster builds</li> <li>\ud83d\udd12 You need to use private or modified packages</li> </ul>"},{"location":"project/kivy/local-wheels/#common-use-case-kivymd-version-mismatch","title":"Common Use Case: KivyMD Version Mismatch","text":"<p>A typical example is KivyMD 1.2.0, where the PyPI and GitHub versions aren't in sync, causing pip installation issues in app site-packages.</p>"},{"location":"project/kivy/local-wheels/#the-problem","title":"The Problem","text":"<p>When you specify: <pre><code>dependencies = [\n    \"kivymd==1.2.0\"\n]\n</code></pre></p> <p>You may encounter version conflicts or missing dependencies during iOS builds.</p>"},{"location":"project/kivy/local-wheels/#the-solution","title":"The Solution","text":"<p>Create a local wheel from the source distribution and host it in a local simple index.</p>"},{"location":"project/kivy/local-wheels/#step-by-step-guide","title":"Step-by-Step Guide","text":""},{"location":"project/kivy/local-wheels/#step-1-create-wheel-sources-directory","title":"Step 1: Create Wheel Sources Directory","text":"<p>From your app's root folder:</p> <pre><code># Create directory for source distributions\nmkdir wheel_sources\ncd wheel_sources\n</code></pre>"},{"location":"project/kivy/local-wheels/#step-2-download-the-source-distribution","title":"Step 2: Download the Source Distribution","text":"<p>Download the specific version you need (without dependencies):</p> <pre><code># Download source distribution for the package\npip3 download kivymd==1.2.0 --no-deps -o .\n</code></pre> <p>This downloads <code>kivymd-1.2.0.tar.gz</code> to the current directory.</p> <p>Why --no-deps?</p> <p>The <code>--no-deps</code> flag ensures only the package itself is downloaded, not its dependencies. This gives you control over what gets built.</p>"},{"location":"project/kivy/local-wheels/#step-3-build-the-wheel","title":"Step 3: Build the Wheel","text":"<p>Build a wheel from the source distribution:</p> <pre><code># Build wheel and output to ../wheels directory\nuv build kivymd-1.2.0.tar.gz --wheel -o ../wheels\n</code></pre> <p>This creates: - <code>../wheels/kivymd-1.2.0-py3-none-any.whl</code></p> <p>Universal Wheels</p> <p>Pure Python packages create universal wheels (<code>py3-none-any</code>) that work on all platforms, including iOS.</p>"},{"location":"project/kivy/local-wheels/#step-4-update-simple-index","title":"Step 4: Update Simple Index","text":"<p>Generate the PEP 503 simple package index:</p> <pre><code># Return to app root\ncd ..\n\n# Generate/update the simple index\npsproject update simple\n</code></pre> <p>This scans the <code>wheels/</code> directory and creates <code>wheels/simple/</code> with the package index.</p>"},{"location":"project/kivy/local-wheels/#step-5-configure-local-backend","title":"Step 5: Configure Local Backend","text":"<p>Edit your <code>pyproject.toml</code> to add the local wheels as a backend:</p> <pre><code>[tool.psproject]\nbackends = [\n    \"./wheels/simple\"\n]\n</code></pre> <p>Done!</p> <p>Your app will now use the local wheel for <code>kivymd==1.2.0</code> instead of trying to fetch it from PyPI!</p>"},{"location":"project/kivy/local-wheels/#complete-example","title":"Complete Example","text":"<p>Here's the full workflow in one script:</p> <pre><code>#!/bin/bash\n# Setup local wheels for KivyMD\n\n# Create structure\nmkdir -p wheel_sources\ncd wheel_sources\n\n# Download source\npip3 download kivymd==1.2.0 --no-deps -o .\n\n# Build wheel\nuv build kivymd-1.2.0.tar.gz --wheel -o ../wheels\n\n# Return to root\ncd ..\n\n# Update index\npsproject update simple\n\necho \"\u2705 Local wheel created for kivymd==1.2.0\"\necho \"\ud83d\udcdd Add './wheels/simple' to [tool.psproject] backends in pyproject.toml\"\n</code></pre>"},{"location":"project/kivy/local-wheels/#project-structure","title":"Project Structure","text":"<p>After setup, your project should look like:</p> <pre><code>MyApp/\n\u251c\u2500\u2500 pyproject.toml\n\u251c\u2500\u2500 main.py\n\u251c\u2500\u2500 wheel_sources/\n\u2502   \u2514\u2500\u2500 kivymd-1.2.0.tar.gz\n\u2514\u2500\u2500 wheels/\n    \u251c\u2500\u2500 kivymd-1.2.0-py3-none-any.whl\n    \u2514\u2500\u2500 simple/\n        \u251c\u2500\u2500 index.html\n        \u2514\u2500\u2500 kivymd/\n            \u2514\u2500\u2500 index.html\n</code></pre>"},{"location":"project/kivy/local-wheels/#configuration-reference","title":"Configuration Reference","text":""},{"location":"project/kivy/local-wheels/#basic-configuration","title":"Basic Configuration","text":"<pre><code>[tool.psproject]\nbackends = [\n    \"./wheels/simple\"\n]\n</code></pre> <p>Pip will search these in order, falling back to PyPI if not found.</p>"},{"location":"project/kivy/local-wheels/#advanced-custom-modified-wheels","title":"Advanced: Custom Modified Wheels","text":"<p>You can also modify a package and build a custom wheel:</p>"},{"location":"project/kivy/local-wheels/#step-1-extract-source","title":"Step 1: Extract Source","text":"<pre><code>cd wheel_sources\n\n# Extract the tarball\ntar -xzf kivymd-1.2.0.tar.gz\n\n# Make your modifications\ncd kivymd-1.2.0\n# Edit files as needed...\n</code></pre>"},{"location":"project/kivy/local-wheels/#step-2-modify-version-optional","title":"Step 2: Modify Version (Optional)","text":"<p>To avoid conflicts, you can bump the version:</p> <pre><code># In setup.py or pyproject.toml\nversion = \"1.2.0+custom\"\n</code></pre>"},{"location":"project/kivy/local-wheels/#step-3-build-custom-wheel","title":"Step 3: Build Custom Wheel","text":"<pre><code># Build from the modified source directory\ncd ..\nuv build kivymd-1.2.0/ --wheel -o ../wheels\n</code></pre>"},{"location":"project/kivy/local-wheels/#step-4-update-and-use","title":"Step 4: Update and Use","text":"<pre><code>cd ..\npsproject update simple\n</code></pre> <p>In your <code>pyproject.toml</code>:</p> <pre><code>dependencies = [\n    \"kivymd==1.2.0+custom\"\n]\n\n[tool.psproject]\nbackends = [\n    \"./wheels/simple\"\n]\n</code></pre>"},{"location":"project/kivy/local-wheels/#managing-multiple-packages","title":"Managing Multiple Packages","text":"<p>You can build wheels for multiple packages:</p> <pre><code># Download multiple packages\ncd wheel_sources\npip3 download package1==1.0.0 --no-deps -o .\npip3 download package2==2.0.0 --no-deps -o .\npip3 download package3==3.0.0 --no-deps -o .\n\n# Build all wheels\nfor file in *.tar.gz; do\n    uv build \"$file\" --wheel -o ../wheels\ndone\n\ncd ..\npsproject update simple\n</code></pre>"},{"location":"project/kivy/local-wheels/#troubleshooting","title":"Troubleshooting","text":""},{"location":"project/kivy/local-wheels/#wheel-not-found","title":"Wheel Not Found","text":"<p>If pip can't find your local wheel:</p> <pre><code># Verify the wheel exists\nls wheels/*.whl\n\n# Verify the simple index was generated\nls wheels/simple/\n\n# Regenerate index\npsproject update simple\n\n# Check pyproject.toml has correct path\ngrep -A 2 \"backends\" pyproject.toml\n</code></pre>"},{"location":"project/kivy/local-wheels/#version-conflicts","title":"Version Conflicts","text":"<p>If you get version conflicts:</p> <pre><code># Check what version you built\nls wheels/*.whl\n\n# Make sure pyproject.toml matches\ngrep \"kivymd\" pyproject.toml\n</code></pre>"},{"location":"project/kivy/local-wheels/#build-errors","title":"Build Errors","text":"<p>If <code>uv build</code> fails:</p> <pre><code># Try with pip instead\ncd wheel_sources\npip3 wheel kivymd-1.2.0.tar.gz -w ../wheels --no-deps\n\ncd ..\npsproject update simple\n</code></pre>"},{"location":"project/kivy/local-wheels/#use-cases","title":"Use Cases","text":""},{"location":"project/kivy/local-wheels/#1-betapre-release-testing","title":"1. Beta/Pre-release Testing","text":"<pre><code># Download pre-release\npip3 download kivymd==2.0.0.dev0 --pre --no-deps -o wheel_sources/\n\n# Build and use\nuv build wheel_sources/kivymd-2.0.0.dev0.tar.gz --wheel -o wheels/\npsproject update simple\n</code></pre>"},{"location":"project/kivy/local-wheels/#2-patched-dependencies","title":"2. Patched Dependencies","text":"<pre><code># Extract, patch, and rebuild\ncd wheel_sources\ntar -xzf problematic-package-1.0.0.tar.gz\ncd problematic-package-1.0.0\n\n# Apply your patch\npatch -p1 &lt; ../../fix.patch\n\n# Build with custom version\nsed -i '' 's/1.0.0/1.0.0+patched/' setup.py\ncd ..\nuv build problematic-package-1.0.0/ --wheel -o ../wheels\n\ncd ..\npsproject update simple\n</code></pre>"},{"location":"project/kivy/local-wheels/#3-private-internal-packages","title":"3. Private Internal Packages","text":"<pre><code># Build wheels from your internal packages\ncd my-internal-lib/\nuv build --wheel -o ../MyApp/wheels/\n\ncd ../MyApp\npsproject update simple\n</code></pre>"},{"location":"project/kivy/local-wheels/#integration-with-cythonized-projects","title":"Integration with Cythonized Projects","text":"<p>Local wheels work seamlessly with cythonized projects:</p> <pre><code>[tool.psproject]\ncythonized = true\nbackends = [\n    \"./wheels/simple\"  # Local wheels\n]\n\n[project]\ndependencies = [\n    \"kivymd==1.2.0\",      # From local wheels\n    \"requests&gt;=2.31.0\"     # From PyPI\n]\n</code></pre> <p>When you run <code>psproject update app</code>, your app becomes a local wheel too, living alongside your other custom wheels!</p>"},{"location":"project/kivy/local-wheels/#quick-reference","title":"Quick Reference","text":"<pre><code># Setup local wheels\nmkdir wheel_sources &amp;&amp; cd wheel_sources\npip3 download PACKAGE==VERSION --no-deps -o .\nuv build PACKAGE-VERSION.tar.gz --wheel -o ../wheels\ncd .. &amp;&amp; psproject update simple\n\n# Add to pyproject.toml\n[tool.psproject]\nbackends = [\"./wheels/simple\"]\n\n# Rebuild index after changes\npsproject update simple\n\n# Clean and rebuild everything\nrm -rf wheels/simple/\npsproject update simple\n</code></pre>"},{"location":"project/kivy/pyproject-configuration/","title":"PyProject.toml Configuration Guide","text":"<p>This document explains all the configuration keys used in the <code>pyproject.toml</code> file for PySwift projects.</p>"},{"location":"project/kivy/pyproject-configuration/#standard-project-metadata","title":"Standard Project Metadata","text":"<p><code>[project]</code> - Standard Python project metadata following PEP 621</p> <ul> <li><code>name</code>: The name of your project/package</li> <li> <p>Example: <code>\"helloworld\"</code></p> </li> <li> <p><code>version</code>: The current version of your project following semantic versioning</p> </li> <li> <p>Example: <code>\"0.1.0\"</code></p> </li> <li> <p><code>description</code>: A brief description of what your project does</p> </li> <li> <p>Example: <code>\"Add your description here\"</code></p> </li> <li> <p><code>readme</code>: Path to the README file</p> </li> <li> <p>Example: <code>\"README.md\"</code></p> </li> <li> <p><code>authors</code>: List of project authors with name and email</p> </li> <li> <p>Example: <code>[{ name = \"Py-Swift\", email = \"psychowaspx@gmail.com\" }]</code></p> </li> <li> <p><code>requires-python</code>: Minimum Python version required</p> </li> <li> <p>Example: <code>\"&gt;=3.13\"</code></p> </li> <li> <p><code>dependencies</code>: List of Python package dependencies</p> </li> <li>Example: <code>[\"kivy&gt;=2.3.1\"]</code> or <code>[]</code> for no dependencies</li> </ul> <p><code>[project.scripts]</code> - Defines command-line entry points for your application</p> <ul> <li>Key: The command name that will be available in the terminal</li> <li>Value: The module and function to execute in format <code>\"module:function\"</code></li> <li>Example: <code>helloworld = \"helloworld:main\"</code> creates a <code>helloworld</code> command that runs the <code>main()</code> function from the <code>helloworld</code> module</li> </ul>"},{"location":"project/kivy/pyproject-configuration/#build-system","title":"Build System","text":"<p><code>[build-system]</code> - Specifies the build backend and its requirements</p> <ul> <li><code>requires</code>: List of packages needed to build the project</li> <li> <p>Example: <code>[\"uv_build&gt;=0.9.2,&lt;0.10.0\"]</code></p> </li> <li> <p><code>build-backend</code>: The build backend module to use</p> </li> <li>Example: <code>\"uv_build\"</code></li> </ul>"},{"location":"project/kivy/pyproject-configuration/#dependency-groups","title":"Dependency Groups","text":"<p><code>[dependency-groups]</code> - Optional dependency groups for different platforms or use cases</p> <ul> <li><code>iphoneos</code>: Dependencies specific to iPhone/iOS platform</li> <li>Example: <code>[]</code></li> </ul>"},{"location":"project/kivy/pyproject-configuration/#pyswift-project-configuration","title":"PySwift Project Configuration","text":"<p><code>[tool.psproject]</code> - Main PySwift project configuration section</p> <ul> <li><code>app_name</code>: The display name of your application</li> <li> <p>Example: <code>\"HelloWorld\"</code></p> </li> <li> <p><code>backends</code>: List of backend frameworks to use</p> </li> <li>Example: <code>[\"kivyschool.kivylauncher\"]</code></li> <li> <p>Common values: Kivy-based backends for cross-platform UI</p> </li> <li> <p><code>cythonized</code>: Whether to compile Python code with Cython for performance</p> </li> <li>Type: Boolean</li> <li> <p>Example: <code>false</code></p> </li> <li> <p><code>extra_index</code>: Additional PyPI index URLs for package resolution</p> </li> <li> <p>Example: <code>[]</code></p> </li> <li> <p><code>pip_install_app</code>: Whether to install the app using pip</p> </li> <li>Type: Boolean</li> <li>Example: <code>false</code></li> </ul> <p><code>[tool.psproject.ios]</code> - iOS-specific PySwift configuration</p> <ul> <li><code>backends</code>: iOS-specific backend frameworks</li> <li> <p>Example: <code>[]</code></p> </li> <li> <p><code>extra_index</code>: Additional package indexes for iOS dependencies</p> </li> <li>Example:     <pre><code>[\n    \"https://pypi.anaconda.org/beeware/simple\",\n    \"https://pypi.anaconda.org/pyswift/simple\",\n    \"https://pypi.anaconda.org/kivyschool/simple\"\n]\n</code></pre></li> <li>These indexes provide iOS-compatible wheels and packages</li> </ul> <p><code>[tool.psproject.ios.info_plist]</code> - iOS-specific Info.plist configuration</p> <p>This section can contain key-value pairs that will be added to the iOS app's Info.plist file.</p> <p>Common keys might include:</p> <ul> <li>Bundle identifiers</li> <li>App permissions (camera, microphone, etc.)</li> <li>Supported orientations</li> <li>App capabilities</li> </ul> <p><code>[tool.psproject.ios.swift_packages]</code> - iOS-specific Swift Package Manager dependencies</p> <p>Define Swift packages that your iOS app depends on.</p> <ul> <li>Format: Typically package name and version/URL specifications</li> </ul> <p><code>[tool.psproject.macos]</code> - macOS-specific PySwift configuration</p> <ul> <li><code>backends</code>: macOS-specific backend frameworks</li> <li> <p>Example: <code>[]</code></p> </li> <li> <p><code>extra_index</code>: Additional package indexes for macOS dependencies</p> </li> <li>Example: <code>[]</code></li> </ul> <p><code>[tool.psproject.macos.info_plist]</code> - macOS-specific Info.plist configuration</p> <p>Similar to iOS Info.plist but for macOS applications.</p> <p>Common keys might include:</p> <ul> <li>Bundle identifiers</li> <li>App permissions</li> <li>Supported file types</li> <li>App capabilities</li> </ul> <p><code>[tool.psproject.macos.swift_packages]</code> - macOS-specific Swift Package Manager dependencies</p> <p>Define Swift packages that your macOS app depends on.</p> <p><code>[tool.psproject.swift_packages]</code> - Cross-platform Swift Package Manager dependencies</p> <p>Define Swift packages that are used across iOS, macOS, and other supported platforms</p> <ul> <li>Format: Package specifications with URLs and version constraints</li> </ul>"},{"location":"project/kivy/pyproject-configuration/#example-usage","title":"Example Usage","text":"<p>Complete minimal configuration example (including all required sections)</p> <pre><code>[project]\nname = \"helloworld\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nreadme = \"README.md\"\nauthors = [\n    { name = \"Py-Swift\", email = \"psychowaspx@gmail.com\" }\n]\nrequires-python = \"&gt;=3.13\"\ndependencies = [\n    \"kivy&gt;=2.3.1\",\n]\n\n[project.scripts]\nhelloworld = \"helloworld:main\"\n\n[build-system]\nrequires = [\"uv_build&gt;=0.9.2,&lt;0.10.0\"]\nbuild-backend = \"uv_build\"\n\n[dependency-groups]\niphoneos = []\n\n[tool.psproject]\napp_name = \"HelloWorld\"\nbackends = [\n    \"kivyschool.kivylauncher\"\n]\ncythonized = false\nextra_index = []\npip_install_app = false\n\n[tool.psproject.ios]\nbackends = []\nextra_index = [\n    \"https://pypi.anaconda.org/beeware/simple\",\n    \"https://pypi.anaconda.org/pyswift/simple\",\n    \"https://pypi.anaconda.org/kivyschool/simple\"\n]\n\n[tool.psproject.ios.info_plist]\n\n[tool.psproject.ios.swift_packages]\n\n[tool.psproject.macos]\nbackends = []\nextra_index = []\n\n[tool.psproject.macos.info_plist]\n\n[tool.psproject.macos.swift_packages]\n\n[tool.psproject.swift_packages]\n</code></pre>"},{"location":"project/kivy/pyproject-configuration/#tips","title":"Tips","text":"<p>Version Constraints</p> <p>Always specify version constraints for dependencies to ensure reproducible builds</p> <p>Extra Indexes</p> <p>Order matters - indexes are checked in the order listed</p> <p>Platform Separation</p> <p>Keep platform-specific configuration in the appropriate sections</p> <p>Swift Packages</p> <p>Use Swift packages for native functionality that Python alone cannot provide</p>"},{"location":"wrapper_docs/expanded_types/","title":"Expanded Type Support","text":""},{"location":"wrapper_docs/expanded_types/#overview","title":"Overview","text":"<p>When you mark classes with <code>@PyClass</code>, they automatically gain the ability to be passed between Python and Swift. This document explains how PySwiftKit handles custom class serialization and how to use arrays and dictionaries of custom types.</p>"},{"location":"wrapper_docs/expanded_types/#serialization-protocols","title":"Serialization Protocols","text":"<p>PySwiftKit uses two core protocols for converting between Python and Swift:</p>"},{"location":"wrapper_docs/expanded_types/#pydeserialize-python-swift","title":"PyDeserialize (Python \u2192 Swift)","text":"<pre><code>public protocol PyDeserialize {\n    static func casted(from object: PyPointer) throws -&gt; Self\n    static func casted(unsafe object: PyPointer) throws -&gt; Self\n}\n</code></pre> <p>This protocol handles converting Python objects to Swift types.</p>"},{"location":"wrapper_docs/expanded_types/#pyserialize-swift-python","title":"PySerialize (Swift \u2192 Python)","text":"<pre><code>public protocol PySerialize {\n    func pyPointer() -&gt; PyPointer\n}\n</code></pre> <p>This protocol handles converting Swift objects to Python objects.</p> <p>Automatic Conformance</p> <p>Classes marked with <code>@PyClass</code> automatically conform to <code>PyDeserialize</code>, enabling seamless conversion from Python to Swift. This means you can pass instances of your Python classes to Swift methods, and PySwiftKit will handle the conversion automatically.</p>"},{"location":"wrapper_docs/expanded_types/#custom-class-examples","title":"Custom Class Examples","text":"<p>Let's define two classes that we'll use throughout the examples:</p> CustomClasses.swift<pre><code>import PySwiftKit\nimport PySerializing\nimport PySwiftWrapper\n\n@PyClass\nclass Person {\n\n    @PyProperty\n    var name: String\n\n    @PyProperty\n    var age: Int\n\n    @PyInit\n    init(name: String, age: Int) {\n        self.name = name\n        self.age = age\n    }\n\n    @PyMethod\n    func greet() -&gt; String {\n        return \"Hello, I'm \\(name) and I'm \\(age) years old\"\n    }\n\n    @PyMethod\n    func meet(other: Person) -&gt; String {\n        return \"\\(name) meets \\(other.name)\"\n    }\n}\n\n@PyClass\nclass Book {\n\n    @PyProperty\n    var title: String\n\n    @PyProperty\n    var author: String\n\n    @PyProperty\n    var pages: Int\n\n    @PyInit\n    init(title: String, author: String, pages: Int) {\n        self.title = title\n        self.author = author\n        self.pages = pages\n    }\n\n    @PyMethod\n    func description() -&gt; String {\n        return \"'\\(title)' by \\(author) (\\(pages) pages)\"\n    }\n\n    @PyMethod\n    func compare_length(other: Book) -&gt; String {\n        if pages &gt; other.pages {\n            return \"\\(title) is longer than \\(other.title)\"\n        } else if pages &lt; other.pages {\n            return \"\\(title) is shorter than \\(other.title)\"\n        } else {\n            return \"\\(title) and \\(other.title) have the same length\"\n        }\n    }\n}\n\n@PyModule\nstruct custom_types: PyModuleProtocol {\n    static var py_classes: [any (PyClassProtocol &amp; AnyObject).Type] = [\n        Person.self,\n        Book.self\n    ]\n}\n</code></pre>"},{"location":"wrapper_docs/expanded_types/#using-custom-classes","title":"Using Custom Classes","text":""},{"location":"wrapper_docs/expanded_types/#basic-usage","title":"Basic Usage","text":"basic_usage.py<pre><code>from custom_types import Person, Book\n\n# Create instances\nalice = Person(name=\"Alice\", age=30)\nbob = Person(name=\"Bob\", age=25)\n\nprint(alice.greet())  # \"Hello, I'm Alice and I'm 30 years old\"\nprint(alice.meet(bob))  # \"Alice meets Bob\"\n\n# Create books\nbook1 = Book(title=\"The Swift Guide\", author=\"John Doe\", pages=450)\nbook2 = Book(title=\"Python Basics\", author=\"Jane Smith\", pages=320)\n\nprint(book1.description())  # \"'The Swift Guide' by John Doe (450 pages)\"\nprint(book1.compare_length(book2))  # \"The Swift Guide is longer than Python Basics\"\n</code></pre>"},{"location":"wrapper_docs/expanded_types/#arrays-of-custom-classes","title":"Arrays of Custom Classes","text":"<p>PySwiftKit automatically supports <code>Array&lt;T&gt;</code> where <code>T</code> conforms to <code>PyDeserialize</code>. This means you can pass lists of your custom classes between Python and Swift.</p>"},{"location":"wrapper_docs/expanded_types/#swift-implementation-with-arrays","title":"Swift Implementation with Arrays","text":"LibraryManager.swift<pre><code>import PySwiftKit\nimport PySerializing\nimport PySwiftWrapper\n\n@PyClass\nclass LibraryManager {\n\n    @PyProperty\n    var books: [Book]\n\n    @PyInit\n    init(books: [Book]) {\n        self.books = books\n    }\n\n    @PyMethod\n    func add_book(book: Book) {\n        books.append(book)\n    }\n\n    @PyMethod\n    func total_pages() -&gt; Int {\n        return books.reduce(0) { $0 + $1.pages }\n    }\n\n    @PyMethod\n    func get_books() -&gt; [Book] {\n        return books\n    }\n\n    @PyMethod\n    func books_by_author(author: String) -&gt; [Book] {\n        return books.filter { $0.author == author }\n    }\n\n    @PyMethod\n    func longest_book() -&gt; Book? {\n        return books.max(by: { $0.pages &lt; $1.pages })\n    }\n}\n\n@PyClass\nclass TeamManager {\n\n    @PyProperty\n    var members: [Person]\n\n    @PyInit\n    init(members: [Person]) {\n        self.members = members\n    }\n\n    @PyMethod\n    func add_member(person: Person) {\n        members.append(person)\n    }\n\n    @PyMethod\n    func get_members() -&gt; [Person] {\n        return members\n    }\n\n    @PyMethod\n    func average_age() -&gt; Double {\n        guard !members.isEmpty else { return 0 }\n        let total = members.reduce(0) { $0 + $1.age }\n        return Double(total) / Double(members.count)\n    }\n\n    @PyMethod\n    func find_by_name(name: String) -&gt; Person? {\n        return members.first { $0.name == name }\n    }\n\n    @PyMethod\n    func introduce_all() -&gt; [String] {\n        return members.map { $0.greet() }\n    }\n}\n\n@PyModule\nstruct library_module: PyModuleProtocol {\n    static var py_classes: [any (PyClassProtocol &amp; AnyObject).Type] = [\n        Person.self,\n        Book.self,\n        LibraryManager.self,\n        TeamManager.self\n    ]\n}\n</code></pre>"},{"location":"wrapper_docs/expanded_types/#python-usage-with-arrays","title":"Python Usage with Arrays","text":"array_examples.py<pre><code>from library_module import Person, Book, LibraryManager, TeamManager\n\n# Create a library with books\nbooks = [\n    Book(title=\"Swift Programming\", author=\"Apple\", pages=500),\n    Book(title=\"Python Guide\", author=\"Python Foundation\", pages=400),\n    Book(title=\"iOS Development\", author=\"Apple\", pages=600),\n]\n\nlibrary = LibraryManager(books=books)\n\n# Add more books\nlibrary.add_book(Book(title=\"Advanced Swift\", author=\"Apple\", pages=450))\n\n# Get total pages\nprint(f\"Total pages: {library.total_pages()}\")  # Total pages: 1950\n\n# Get all books\nall_books = library.get_books()\nfor book in all_books:\n    print(book.description())\n\n# Filter books by author\napple_books = library.books_by_author(\"Apple\")\nprint(f\"Books by Apple: {len(apple_books)}\")\n\n# Find longest book\nlongest = library.longest_book()\nif longest:\n    print(f\"Longest book: {longest.title} ({longest.pages} pages)\")\n\n# Working with team members\nteam = TeamManager(members=[\n    Person(name=\"Alice\", age=30),\n    Person(name=\"Bob\", age=25),\n    Person(name=\"Charlie\", age=35),\n])\n\nteam.add_member(Person(name=\"Diana\", age=28))\n\nprint(f\"Average age: {team.average_age():.1f}\")  # Average age: 29.5\n\n# Get all introductions\nintros = team.introduce_all()\nfor intro in intros:\n    print(intro)\n\n# Find specific person\nalice = team.find_by_name(\"Alice\")\nif alice:\n    print(f\"Found: {alice.name}, age {alice.age}\")\n</code></pre>"},{"location":"wrapper_docs/expanded_types/#dictionaries-with-custom-classes","title":"Dictionaries with Custom Classes","text":"<p>PySwiftKit supports <code>Dictionary&lt;String, T&gt;</code> where <code>T</code> conforms to <code>PyDeserialize</code>. This enables using custom classes as dictionary values.</p>"},{"location":"wrapper_docs/expanded_types/#swift-implementation-with-dictionaries","title":"Swift Implementation with Dictionaries","text":"DatabaseManager.swift<pre><code>import PySwiftKit\nimport PySerializing\nimport PySwiftWrapper\n\n@PyClass\nclass ContactBook {\n\n    @PyProperty\n    var contacts: [String: Person]\n\n    @PyInit\n    init(contacts: [String: Person]) {\n        self.contacts = contacts\n    }\n\n    @PyMethod\n    func add_contact(id: String, person: Person) {\n        contacts[id] = person\n    }\n\n    @PyMethod\n    func get_contact(id: String) -&gt; Person? {\n        return contacts[id]\n    }\n\n    @PyMethod\n    func get_all_contacts() -&gt; [String: Person] {\n        return contacts\n    }\n\n    @PyMethod\n    func remove_contact(id: String) -&gt; Bool {\n        if contacts[id] != nil {\n            contacts.removeValue(forKey: id)\n            return true\n        }\n        return false\n    }\n\n    @PyMethod\n    func contact_count() -&gt; Int {\n        return contacts.count\n    }\n\n    @PyMethod\n    func get_names() -&gt; [String] {\n        return contacts.values.map { $0.name }\n    }\n}\n\n@PyClass\nclass BookCatalog {\n\n    @PyProperty\n    var catalog: [String: Book]\n\n    @PyInit\n    init(catalog: [String: Book]) {\n        self.catalog = catalog\n    }\n\n    @PyMethod\n    func add_book(isbn: String, book: Book) {\n        catalog[isbn] = book\n    }\n\n    @PyMethod\n    func get_book(isbn: String) -&gt; Book? {\n        return catalog[isbn]\n    }\n\n    @PyMethod\n    func get_catalog() -&gt; [String: Book] {\n        return catalog\n    }\n\n    @PyMethod\n    func search_by_title(title: String) -&gt; [(String, Book)] {\n        return catalog.filter { $0.value.title.contains(title) }\n            .map { ($0.key, $0.value) }\n    }\n\n    @PyMethod\n    func total_books() -&gt; Int {\n        return catalog.count\n    }\n\n    @PyMethod\n    func all_authors() -&gt; [String] {\n        return Array(Set(catalog.values.map { $0.author }))\n    }\n}\n\n@PyModule\nstruct database_module: PyModuleProtocol {\n    static var py_classes: [any (PyClassProtocol &amp; AnyObject).Type] = [\n        Person.self,\n        Book.self,\n        ContactBook.self,\n        BookCatalog.self\n    ]\n}\n</code></pre>"},{"location":"wrapper_docs/expanded_types/#python-usage-with-dictionaries","title":"Python Usage with Dictionaries","text":"dictionary_examples.py<pre><code>from database_module import Person, Book, ContactBook, BookCatalog\n\n# Create contact book with dictionary\ncontacts = {\n    \"alice_001\": Person(name=\"Alice Johnson\", age=30),\n    \"bob_002\": Person(name=\"Bob Smith\", age=25),\n    \"charlie_003\": Person(name=\"Charlie Brown\", age=35),\n}\n\ncontact_book = ContactBook(contacts=contacts)\n\n# Add new contact\ncontact_book.add_contact(\"diana_004\", Person(name=\"Diana Prince\", age=28))\n\n# Get specific contact\nalice = contact_book.get_contact(\"alice_001\")\nif alice:\n    print(alice.greet())\n\n# Get all contacts\nall_contacts = contact_book.get_all_contacts()\nfor contact_id, person in all_contacts.items():\n    print(f\"{contact_id}: {person.name}\")\n\n# Get just names\nnames = contact_book.get_names()\nprint(f\"Contact names: {', '.join(names)}\")\n\n# Remove a contact\nif contact_book.remove_contact(\"bob_002\"):\n    print(\"Bob removed from contacts\")\n\nprint(f\"Total contacts: {contact_book.contact_count()}\")\n\n# Working with book catalog\ncatalog = {\n    \"978-0-123456-78-9\": Book(title=\"Swift Programming\", author=\"Apple\", pages=500),\n    \"978-0-987654-32-1\": Book(title=\"Python Guide\", author=\"Guido\", pages=400),\n    \"978-0-111111-11-1\": Book(title=\"iOS Development\", author=\"Apple\", pages=600),\n}\n\nbook_catalog = BookCatalog(catalog=catalog)\n\n# Add new book\nbook_catalog.add_book(\n    \"978-0-222222-22-2\",\n    Book(title=\"Advanced Swift\", author=\"Apple\", pages=450)\n)\n\n# Get specific book\nbook = book_catalog.get_book(\"978-0-123456-78-9\")\nif book:\n    print(book.description())\n\n# Search by title\nswift_books = book_catalog.search_by_title(\"Swift\")\nprint(f\"Found {len(swift_books)} books with 'Swift' in title:\")\nfor isbn, book in swift_books:\n    print(f\"  {isbn}: {book.title}\")\n\n# Get unique authors\nauthors = book_catalog.all_authors()\nprint(f\"Authors in catalog: {', '.join(authors)}\")\n\nprint(f\"Total books: {book_catalog.total_books()}\")\n</code></pre>"},{"location":"wrapper_docs/expanded_types/#advanced-example-nested-collections","title":"Advanced Example: Nested Collections","text":"<p>You can combine arrays and dictionaries for more complex data structures:</p> AdvancedCollections.swift<pre><code>import PySwiftKit\nimport PySerializing\nimport PySwiftWrapper\n\n@PyClass\nclass University {\n\n    @PyProperty\n    var departments: [String: [Person]]\n\n    @PyInit\n    init(departments: [String: [Person]]) {\n        self.departments = departments\n    }\n\n    @PyMethod\n    func add_department(name: String, staff: [Person]) {\n        departments[name] = staff\n    }\n\n    @PyMethod\n    func add_to_department(dept: String, person: Person) {\n        if departments[dept] != nil {\n            departments[dept]?.append(person)\n        } else {\n            departments[dept] = [person]\n        }\n    }\n\n    @PyMethod\n    func get_department(name: String) -&gt; [Person]? {\n        return departments[name]\n    }\n\n    @PyMethod\n    func total_staff() -&gt; Int {\n        return departments.values.reduce(0) { $0 + $1.count }\n    }\n\n    @PyMethod\n    func department_sizes() -&gt; [String: Int] {\n        return departments.mapValues { $0.count }\n    }\n\n    @PyMethod\n    func find_person(name: String) -&gt; (String, Person)? {\n        for (dept, people) in departments {\n            if let person = people.first(where: { $0.name == name }) {\n                return (dept, person)\n            }\n        }\n        return nil\n    }\n}\n\n@PyClass\nclass Library {\n\n    @PyProperty\n    var sections: [String: [Book]]\n\n    @PyInit\n    init(sections: [String: [Book]]) {\n        self.sections = sections\n    }\n\n    @PyMethod\n    func add_section(name: String, books: [Book]) {\n        sections[name] = books\n    }\n\n    @PyMethod\n    func add_to_section(section: String, book: Book) {\n        if sections[section] != nil {\n            sections[section]?.append(book)\n        } else {\n            sections[section] = [book]\n        }\n    }\n\n    @PyMethod\n    func get_section(name: String) -&gt; [Book]? {\n        return sections[name]\n    }\n\n    @PyMethod\n    func total_books() -&gt; Int {\n        return sections.values.reduce(0) { $0 + $1.count }\n    }\n\n    @PyMethod\n    func section_statistics() -&gt; [String: (Int, Int)] {\n        return sections.mapValues { books in\n            let count = books.count\n            let totalPages = books.reduce(0) { $0 + $1.pages }\n            return (count, totalPages)\n        }\n    }\n}\n\n@PyModule\nstruct advanced_module: PyModuleProtocol {\n    static var py_classes: [any (PyClassProtocol &amp; AnyObject).Type] = [\n        Person.self,\n        Book.self,\n        University.self,\n        Library.self\n    ]\n}\n</code></pre>"},{"location":"wrapper_docs/expanded_types/#python-usage-with-nested-collections","title":"Python Usage with Nested Collections","text":"nested_examples.py<pre><code>from advanced_module import Person, Book, University, Library\n\n# Create university with departments\nuniversity = University(departments={\n    \"Computer Science\": [\n        Person(name=\"Dr. Smith\", age=45),\n        Person(name=\"Dr. Johnson\", age=38),\n    ],\n    \"Mathematics\": [\n        Person(name=\"Prof. Brown\", age=52),\n        Person(name=\"Dr. Davis\", age=41),\n    ],\n})\n\n# Add new department\nuniversity.add_department(\"Physics\", [\n    Person(name=\"Dr. Wilson\", age=39),\n])\n\n# Add person to existing department\nuniversity.add_to_department(\"Computer Science\", Person(name=\"Dr. Taylor\", age=33))\n\n# Get department staff\ncs_staff = university.get_department(\"Computer Science\")\nif cs_staff:\n    print(f\"Computer Science has {len(cs_staff)} staff members:\")\n    for person in cs_staff:\n        print(f\"  - {person.name}, {person.age}\")\n\n# Get total staff count\nprint(f\"Total university staff: {university.total_staff()}\")\n\n# Get department sizes\nsizes = university.department_sizes()\nfor dept, size in sizes.items():\n    print(f\"{dept}: {size} staff\")\n\n# Find a specific person\nresult = university.find_person(\"Dr. Smith\")\nif result:\n    dept, person = result\n    print(f\"Found {person.name} in {dept} department\")\n\n# Library with sections\nlibrary = Library(sections={\n    \"Science Fiction\": [\n        Book(title=\"Dune\", author=\"Frank Herbert\", pages=688),\n        Book(title=\"Foundation\", author=\"Isaac Asimov\", pages=255),\n    ],\n    \"Technical\": [\n        Book(title=\"Swift Programming\", author=\"Apple\", pages=500),\n        Book(title=\"Python Guide\", author=\"Guido\", pages=400),\n    ],\n})\n\n# Add new section\nlibrary.add_section(\"Mystery\", [\n    Book(title=\"Murder on the Orient Express\", author=\"Agatha Christie\", pages=256),\n])\n\n# Add book to section\nlibrary.add_to_section(\"Technical\", Book(title=\"iOS Development\", author=\"Apple\", pages=600))\n\n# Get section books\nsci_fi = library.get_section(\"Science Fiction\")\nif sci_fi:\n    print(\"\\nScience Fiction books:\")\n    for book in sci_fi:\n        print(f\"  - {book.description()}\")\n\n# Get statistics\nstats = library.section_statistics()\nfor section, (count, pages) in stats.items():\n    print(f\"{section}: {count} books, {pages} total pages\")\n\nprint(f\"\\nTotal books in library: {library.total_books()}\")\n</code></pre>"},{"location":"wrapper_docs/expanded_types/#type-conversion-summary","title":"Type Conversion Summary","text":"<p>Automatic Conversions</p> <p>When you mark a class with <code>@PyClass</code>:</p> <ul> <li>\u2713 Single instance: <code>Person</code> \u2194 Python object</li> <li>\u2713 Arrays: <code>[Person]</code> \u2194 <code>list[Person]</code></li> <li>\u2713 Dictionaries: <code>[String: Person]</code> \u2194 <code>dict[str, Person]</code></li> <li>\u2713 Nested collections: <code>[String: [Person]]</code> \u2194 <code>dict[str, list[Person]]</code></li> <li>\u2713 Optional types: <code>Person?</code> \u2194 <code>Person | None</code></li> <li>\u2713 Arrays of optionals: <code>[Person?]</code> \u2194 <code>list[Person | None]</code></li> </ul> <p>Best Practices</p> <ol> <li>Use <code>@PyProperty</code> for properties you want accessible from Python</li> <li>Use <code>@PyMethod</code> for methods you want to call from Python</li> <li>Collections are copied, not referenced - changes in Python don't affect Swift arrays</li> <li>Always return collections when you want Python to access modified data</li> <li>Use optionals (<code>Person?</code>) when a value might not exist</li> </ol> <p>Performance Considerations</p> <ul> <li>Passing individual objects is fast</li> <li>Large arrays/dictionaries involve copying data between Python and Swift</li> <li>For very large datasets, consider passing indices or using iterators</li> <li>Nested collections (e.g., <code>[String: [Person]]</code>) involve multiple copies</li> </ul>"},{"location":"wrapper_docs/expanded_types/#error-handling","title":"Error Handling","text":"<p>When type conversion fails, PySwiftKit throws an error:</p> ErrorHandling.swift<pre><code>@PyClass\nclass SafeProcessor {\n\n    @PyMethod\n    func process_people(people: [Person]) -&gt; String {\n        guard !people.isEmpty else {\n            return \"No people to process\"\n        }\n        return \"Processed \\(people.count) people\"\n    }\n\n    @PyMethod\n    func safe_get_book(from catalog: [String: Book], isbn: String) -&gt; Book? {\n        return catalog[isbn]\n    }\n}\n</code></pre> error_handling.py<pre><code>from advanced_module import SafeProcessor, Person, Book\n\nprocessor = SafeProcessor()\n\n# Empty list is fine\nresult = processor.process_people([])\nprint(result)  # \"No people to process\"\n\n# Valid list\npeople = [Person(name=\"Alice\", age=30)]\nresult = processor.process_people(people)\nprint(result)  # \"Processed 1 people\"\n\n# Safe dictionary access\ncatalog = {\n    \"123\": Book(title=\"Swift Guide\", author=\"Apple\", pages=500),\n}\nbook = processor.safe_get_book(catalog, \"123\")\nif book:\n    print(book.title)\n\n# Missing key returns None\nbook = processor.safe_get_book(catalog, \"999\")\nif book is None:\n    print(\"Book not found\")\n</code></pre>"},{"location":"wrapper_docs/expanded_types/#complete-working-example","title":"Complete Working Example","text":"<p>Here's a complete example demonstrating all concepts together:</p> CompleteExample.swift<pre><code>import PySwiftKit\nimport PySerializing\nimport PySwiftWrapper\n\n@PyClass\nclass Student {\n    @PyProperty\n    var name: String\n\n    @PyProperty\n    var grade: Int\n\n    @PyInit\n    init(name: String, grade: Int) {\n        self.name = name\n        self.grade = grade\n    }\n\n    @PyMethod\n    func status() -&gt; String {\n        return \"\\(name): Grade \\(grade)\"\n    }\n}\n\n@PyClass\nclass School {\n    @PyProperty\n    var classes: [String: [Student]]\n\n    @PyInit\n    init(classes: [String: [Student]]) {\n        self.classes = classes\n    }\n\n    @PyMethod\n    func enroll(className: String, student: Student) {\n        if classes[className] != nil {\n            classes[className]?.append(student)\n        } else {\n            classes[className] = [student]\n        }\n    }\n\n    @PyMethod\n    func get_class(name: String) -&gt; [Student]? {\n        return classes[name]\n    }\n\n    @PyMethod\n    func all_classes() -&gt; [String: [Student]] {\n        return classes\n    }\n\n    @PyMethod\n    func total_students() -&gt; Int {\n        return classes.values.reduce(0) { $0 + $1.count }\n    }\n\n    @PyMethod\n    func class_averages() -&gt; [String: Double] {\n        return classes.mapValues { students in\n            guard !students.isEmpty else { return 0.0 }\n            let total = students.reduce(0) { $0 + $1.grade }\n            return Double(total) / Double(students.count)\n        }\n    }\n}\n\n@PyModule\nstruct school_module: PyModuleProtocol {\n    static var py_classes: [any (PyClassProtocol &amp; AnyObject).Type] = [\n        Student.self,\n        School.self\n    ]\n}\n</code></pre> complete_example.py<pre><code>from school_module import Student, School\n\n# Create school with initial classes\nschool = School(classes={\n    \"Math\": [\n        Student(name=\"Alice\", grade=95),\n        Student(name=\"Bob\", grade=87),\n    ],\n    \"Science\": [\n        Student(name=\"Charlie\", grade=92),\n        Student(name=\"Diana\", grade=88),\n    ],\n})\n\n# Enroll new students\nschool.enroll(\"Math\", Student(name=\"Eve\", grade=91))\nschool.enroll(\"History\", Student(name=\"Frank\", grade=85))\n\n# Get specific class\nmath_class = school.get_class(\"Math\")\nif math_class:\n    print(\"Math class students:\")\n    for student in math_class:\n        print(f\"  {student.status()}\")\n\n# Get all classes\nall_classes = school.all_classes()\nprint(f\"\\nTotal classes: {len(all_classes)}\")\nprint(f\"Total students: {school.total_students()}\")\n\n# Get class averages\naverages = school.class_averages()\nprint(\"\\nClass averages:\")\nfor class_name, avg in averages.items():\n    print(f\"  {class_name}: {avg:.1f}\")\n</code></pre> <p>This expanded type support enables you to build complex data structures and pass them seamlessly between Python and Swift!</p>"},{"location":"wrapper_docs/standard_types/","title":"Standard Types and Conversions","text":"<p>This document covers standard type conversions and usage patterns for PythonSwiftLink / Swiftonize.</p>"},{"location":"wrapper_docs/standard_types/#numeric-types","title":"Numeric Types","text":"<p>Integer Types</p> <p>Python <code>int</code> automatically converts to various Swift integer types:</p> Python Type Swift Type Notes <code>int</code> <code>Int</code> Platform-native signed integer <code>int</code> <code>Int32</code> 32-bit signed integer <code>int</code> <code>Int16</code> 16-bit signed integer <code>int</code> <code>Int8</code> 8-bit signed integer <p>Unsigned Integer Types</p> <p>Python <code>int</code> also converts to Swift unsigned integer types:</p> Python Type Swift Type Notes <code>int</code> <code>UInt</code> Platform-native unsigned integer <code>int</code> <code>UInt32</code> 32-bit unsigned integer <code>int</code> <code>UInt16</code> 16-bit unsigned integer <code>int</code> <code>UInt8</code> 8-bit unsigned integer <p>Floating Point Types</p> <p>Python <code>float</code> converts to Swift floating-point types:</p> Python Type Swift Type Notes <code>float</code> <code>Double</code> 64-bit floating point (default) <code>float</code> <code>Float</code> 32-bit floating point <code>float</code> <code>Float16</code> 16-bit floating point"},{"location":"wrapper_docs/standard_types/#string-and-data-types","title":"String and Data Types","text":"<p>String Types</p> Python Type Swift Type Description <code>str</code> <code>String</code> Unicode text strings <code>object</code> <code>PyPointer</code> Raw Python object pointer <p>Binary Data Types</p> <p>Python binary types convert to Swift data structures:</p> <p>bytes conversions:</p> Python Type Swift Type Description <code>bytes</code> <code>Data</code> Swift Data type <code>bytes</code> <code>[UInt8]</code> Array of bytes <p>bytearray conversions:</p> Python Type Swift Type Description <code>bytearray</code> <code>Data</code> Mutable byte sequence as Data <code>bytearray</code> <code>[UInt8]</code> Mutable byte sequence as array <p>memoryview conversions:</p> Python Type Swift Type Description <code>memoryview</code> <code>Data</code> Memory view as Data <code>memoryview</code> <code>[UInt8]</code> Memory view as byte array"},{"location":"wrapper_docs/standard_types/#collection-types","title":"Collection Types","text":"<p>Integer Lists</p> <p>Python lists of integers convert to Swift arrays:</p> <p>Signed integer arrays:</p> Python Type Swift Type <code>list[int]</code> <code>[Int]</code> <code>list[int]</code> <code>[Int32]</code> <code>list[int]</code> <code>[Int16]</code> <code>list[int]</code> <code>[Int8]</code> <p>Unsigned integer arrays:</p> Python Type Swift Type <code>list[int]</code> <code>[UInt]</code> <code>list[int]</code> <code>[UInt32]</code> <code>list[int]</code> <code>[UInt16]</code> <code>list[int]</code> <code>[UInt8]</code> <p>Float Lists</p> <p>Python lists of floats convert to Swift floating-point arrays:</p> Python Type Swift Type <code>list[float]</code> <code>[Double]</code> <code>list[float]</code> <code>[Float]</code> <code>list[float]</code> <code>[Float16]</code> <p>Object and String Lists</p> Python Type Swift Type Description <code>list[object]</code> <code>[PyPointer]</code> Array of Python object pointers <code>list[str]</code> <code>[String]</code> Array of strings <p>Binary Data Lists</p> <p>Lists of bytes:</p> Python Type Swift Type <code>list[bytes]</code> <code>[Data]</code> <code>list[bytes]</code> <code>[[UInt8]]</code> <p>Lists of bytearray:</p> Python Type Swift Type <code>list[bytearray]</code> <code>[Data]</code> <code>list[bytearray]</code> <code>[[UInt8]]</code> <p>Lists of memoryview:</p> Python Type Swift Type <code>list[memoryview]</code> <code>[Data]</code> <code>list[memoryview]</code> <code>[[UInt8]]</code>"},{"location":"wrapper_docs/standard_types/#type-conversion-notes","title":"Type Conversion Notes","text":"<p>Automatic Conversion</p> <p>All these conversions happen automatically when calling Swift functions from Python or vice versa. The bridge will handle the conversion based on the Swift function signature.</p> <p>Choosing the Right Type</p> <ul> <li>Use <code>Int</code>/<code>UInt</code> for general-purpose integers (platform-optimized)</li> <li>Use specific sized types (<code>Int32</code>, <code>UInt16</code>, etc.) when interfacing with APIs that require them</li> <li>Use <code>Double</code> for most floating-point operations (better precision)</li> <li>Use <code>Float</code> or <code>Float16</code> when memory/performance is critical</li> <li>Use <code>Data</code> for binary data when you need Foundation support</li> <li>Use <code>[UInt8]</code> for raw byte manipulation</li> </ul> <p>Usage Example</p> <pre><code># Python side\nmy_int = 42\nmy_floats = [3.14, 2.71, 1.41]\nmy_data = b\"Hello, Swift!\"\n\n# These will automatically convert when passed to Swift functions\nswift_object.process_int(my_int)  # Converts to Swift Int\nswift_object.process_floats(my_floats)  # Converts to [Double]\nswift_object.process_data(my_data)  # Converts to Data or [UInt8]\n</code></pre> <pre><code>// Swift side\nclass SwiftObject {\n    func processInt(_ value: Int) {\n        print(\"Received: \\(value)\")\n    }\n\n    func processFloats(_ values: [Double]) {\n        print(\"Float array: \\(values)\")\n    }\n\n    func processData(_ data: Data) {\n        print(\"Data size: \\(data.count)\")\n    }\n\n    // Swift to Python: Use .pyPointer()\n    func returnToPython() -&gt; PyPointer {\n        let swiftValue = 42\n        return swiftValue.pyPointer()\n    }\n\n    // Python to Swift: Use Type.casted(object:)\n    func receiveFromPython(_ obj: PyPointer) {\n        if let intValue = Int.casted(object: obj) {\n            print(\"Received int from Python: \\(intValue)\")\n        }\n        if let strValue = String.casted(object: obj) {\n            print(\"Received string from Python: \\(strValue)\")\n        }\n    }\n}\n</code></pre> <p>Performance Considerations</p> <ul> <li>Direct numeric conversions are very fast</li> <li>Collection conversions require copying data</li> <li>For large datasets, consider using <code>memoryview</code> or <code>Data</code> to minimize copying</li> <li><code>PyPointer</code> allows passing Python objects without conversion overhead</li> </ul>"},{"location":"wrapper_docs/types/","title":"Types","text":"<p>TypeCasting</p> <p>PythonSwiftLink / Swiftonize will automatic convert between the following python/swift types:</p> Python cast from/to Swift int Int int Int32 int Int16 int Int8 int UInt int UInt32 int UInt16 int UInt8 float Double float Float float Float16 object PyPointer str String bytes Data bytes [UInt8] bytearray Data bytearray [UInt8] memoryview Data memoryview [UInt8] list[int] [Int] list[int] [Int32] list[int] [Int16] list[int] [Int8] list[int] [UInt] list[int] [UInt32] list[int] [UInt16] list[int] [UInt8] list[float] [Double] list[float] [Float] list[float] [Float16] list[object] [PyPointer] list[str] [String] list[bytes] [Data] list[bytes] [[UInt8]] list[bytearray] [Data] list[bytearray] [[UInt8]] list[memoryview] [Data] list[memoryview] [[UInt8]]"},{"location":"wrapper_examples/audio_arpeggiator/","title":"AudioKit Arpeggiator","text":"<p>This example demonstrates wrapping an AudioKit-based arpeggiator that automatically plays held notes in ascending and descending patterns. It shows how to wrap audio engine components, MIDI instruments, sequencers, and real-time tempo/note length controls.</p>"},{"location":"wrapper_examples/audio_arpeggiator/#getting-started","title":"Getting Started","text":"<p>An arpeggiator takes a set of held notes and plays them sequentially in a pattern. This example uses:</p> <ul> <li>AppleSampler - AudioKit's sampler instrument for playback</li> <li>SequencerTrack - For timing and triggering arpeggio steps</li> <li>CallbackInstrument - For MIDI event handling</li> <li>AudioEngine - AudioKit's audio processing engine</li> </ul>"},{"location":"wrapper_examples/audio_arpeggiator/#part-1-basic-swift-implementation","title":"Part 1: Basic Swift Implementation","text":"<p>First, here's a basic Swift implementation without PySwiftKit:</p> <pre><code>import AudioKit\nimport AudioKitEX\nimport AVFoundation\n\nclass ArpeggiatorWrapper {\n    let engine = AudioEngine()\n    var instrument = AppleSampler()\n    var sequencer: SequencerTrack!\n    var midiCallback: CallbackInstrument!\n\n    var heldNotes = [Int]()\n    var isArpDescending = false\n    var currentNote = 0\n    var sequencerNoteLength = 1.0\n    var tempo: Float = 120.0\n\n    init() {\n        midiCallback = CallbackInstrument { status, note, vel in\n            if status == 144 { // Note On\n                self.fireTimer()\n            } else if status == 128 { // Note Off\n                // All notes off\n                for i in 0...127 {\n                    self.instrument.stop(noteNumber: UInt8(i), channel: 0)\n                }\n            }\n        }\n\n        engine.output = PeakLimiter(Mixer(instrument, midiCallback), \n                                    attackTime: 0.001, \n                                    decayTime: 0.001, \n                                    preGain: 0)\n\n        // Load instrument\n        if let fileURL = Bundle.main.url(forResource: \"sawPiano1\", withExtension: \"exs\") {\n            try? instrument.loadInstrument(url: fileURL)\n        }\n\n        sequencer = SequencerTrack(targetNode: midiCallback)\n        sequencer.length = 0.25\n        sequencer.loopEnabled = true\n        sequencer.add(noteNumber: 60, position: 0.0, duration: 0.24)\n        sequencer.tempo = 120.0\n        sequencer.playFromStart()\n    }\n\n    func addNote(_ pitch: Int) {\n        heldNotes.append(max(0, pitch))\n    }\n\n    func removeNote(_ pitch: Int) {\n        heldNotes = heldNotes.filter { $0 != pitch }\n    }\n\n    func fireTimer() {\n        // Stop all playing notes\n        for i in 0...127 {\n            instrument.stop(noteNumber: UInt8(i), channel: 0)\n        }\n\n        if heldNotes.count &lt; 1 {\n            return\n        }\n\n        // Arpeggiator algorithm\n        if !isArpDescending {\n            if heldNotes.max() != currentNote {\n                currentNote = heldNotes.filter { $0 &gt; currentNote }.min() ?? heldNotes.min()!\n            } else {\n                isArpDescending = true\n                currentNote = heldNotes.filter { $0 &lt; currentNote }.max() ?? heldNotes.max()!\n            }\n        } else {\n            if heldNotes.min() != currentNote {\n                currentNote = heldNotes.filter { $0 &lt; currentNote }.max() ?? heldNotes.max()!\n            } else {\n                isArpDescending = false\n                currentNote = heldNotes.filter { $0 &gt; currentNote }.min() ?? heldNotes.min()!\n            }\n        }\n\n        instrument.play(noteNumber: UInt8(currentNote), velocity: 120, channel: 0)\n    }\n\n    func setTempo(_ bpm: Float) {\n        tempo = bpm\n        sequencer.tempo = Double(bpm)\n    }\n\n    func setNoteLength(_ length: Float) {\n        sequencerNoteLength = Double(length)\n        sequencer.clear()\n        sequencer.add(noteNumber: 60, position: 0.0, duration: max(0.05, sequencerNoteLength * 0.24))\n    }\n\n    func start() {\n        try? engine.start()\n        sequencer.playFromStart()\n    }\n\n    func stop() {\n        engine.stop()\n        sequencer.stop()\n    }\n}\n</code></pre> <p>This implementation handles note input, arpeggio pattern generation, tempo control, and MIDI timing.</p>"},{"location":"wrapper_examples/audio_arpeggiator/#part-2-swift-with-pyswiftkit","title":"Part 2: Swift with PySwiftKit","text":"<p>Now let's wrap it with PySwiftKit decorators to expose it to Python:</p> <pre><code>import AudioKit\nimport AudioKitEX\nimport AVFoundation\nimport PythonSwiftLink\n\n@PyClass\nclass AudioArpeggiator {\n    let engine = AudioEngine()\n    var instrument = AppleSampler()\n    var sequencer: SequencerTrack!\n    var midiCallback: CallbackInstrument!\n\n    var heldNotes = [Int]()\n    var isArpDescending = false\n    var currentNote = 0\n    var sequencerNoteLength = 1.0\n    var tempo: Float = 120.0\n\n    @PyInit\n    init() {\n        midiCallback = CallbackInstrument { [weak self] status, note, vel in\n            guard let self = self else { return }\n            if status == 144 { // Note On\n                self.fireTimer()\n            } else if status == 128 { // Note Off\n                // All notes off\n                for i in 0...127 {\n                    self.instrument.stop(noteNumber: UInt8(i), channel: 0)\n                }\n            }\n        }\n\n        engine.output = PeakLimiter(Mixer(instrument, midiCallback), \n                                    attackTime: 0.001, \n                                    decayTime: 0.001, \n                                    preGain: 0)\n\n        // Load instrument from bundle\n        if let fileURL = Bundle.main.url(forResource: \"sawPiano1\", withExtension: \"exs\") {\n            try? instrument.loadInstrument(url: fileURL)\n        }\n\n        sequencer = SequencerTrack(targetNode: midiCallback)\n        sequencer.length = 0.25\n        sequencer.loopEnabled = true\n        sequencer.add(noteNumber: 60, position: 0.0, duration: 0.24)\n        sequencer.tempo = 120.0\n        sequencer.playFromStart()\n    }\n\n    @PyMethod\n    func add_note(_ pitch: Int) {\n        heldNotes.append(max(0, pitch))\n    }\n\n    @PyMethod\n    func remove_note(_ pitch: Int) {\n        heldNotes = heldNotes.filter { $0 != pitch }\n    }\n\n    @PyMethod\n    func clear_notes() {\n        heldNotes.removeAll()\n    }\n\n    @PyMethod\n    func get_held_notes() -&gt; [Int] {\n        return heldNotes\n    }\n\n    func fireTimer() {\n        // Stop all playing notes\n        for i in 0...127 {\n            instrument.stop(noteNumber: UInt8(i), channel: 0)\n        }\n\n        if heldNotes.count &lt; 1 {\n            return\n        }\n\n        // Arpeggiator algorithm - ascending then descending\n        if !isArpDescending {\n            if heldNotes.max() != currentNote {\n                currentNote = heldNotes.filter { $0 &gt; currentNote }.min() ?? heldNotes.min()!\n            } else {\n                isArpDescending = true\n                currentNote = heldNotes.filter { $0 &lt; currentNote }.max() ?? heldNotes.max()!\n            }\n        } else {\n            if heldNotes.min() != currentNote {\n                currentNote = heldNotes.filter { $0 &lt; currentNote }.max() ?? heldNotes.max()!\n            } else {\n                isArpDescending = false\n                currentNote = heldNotes.filter { $0 &gt; currentNote }.min() ?? heldNotes.min()!\n            }\n        }\n\n        instrument.play(noteNumber: UInt8(currentNote), velocity: 120, channel: 0)\n    }\n\n    @PyMethod\n    func set_tempo(_ bpm: Float) {\n        tempo = max(20.0, min(250.0, bpm))  // Clamp to reasonable range\n        sequencer.tempo = Double(tempo)\n    }\n\n    @PyMethod\n    func get_tempo() -&gt; Float {\n        return tempo\n    }\n\n    @PyMethod\n    func set_note_length(_ length: Float) {\n        sequencerNoteLength = Double(max(0.0, min(1.0, length)))  // Clamp 0-1\n        sequencer.clear()\n        sequencer.add(noteNumber: 60, position: 0.0, duration: max(0.05, sequencerNoteLength * 0.24))\n    }\n\n    @PyMethod\n    func get_note_length() -&gt; Float {\n        return Float(sequencerNoteLength)\n    }\n\n    @PyMethod\n    func start() {\n        do {\n            try engine.start()\n            sequencer.playFromStart()\n        } catch {\n            print(\"Failed to start audio engine: \\(error)\")\n        }\n    }\n\n    @PyMethod\n    func stop() {\n        engine.stop()\n        sequencer.stop()\n    }\n\n    @PyMethod\n    func pause() {\n        sequencer.stop()\n    }\n\n    @PyMethod\n    func resume() {\n        sequencer.playFromStart()\n    }\n}\n\n@PyModule\nclass ArpeggiatorModule {\n    static func registerTypes() {\n        AudioArpeggiator.register()\n    }\n}\n</code></pre> <p>Key AudioKit Components</p> <ul> <li>AppleSampler: Loads and plays sampled instruments (.exs, .sf2, .wav files)</li> <li>SequencerTrack: Provides timing for arpeggio steps with tempo control</li> <li>CallbackInstrument: Receives MIDI events for triggering notes</li> <li>AudioEngine: Manages the audio processing graph</li> <li>PeakLimiter/Mixer: Audio processing nodes for output management</li> </ul>"},{"location":"wrapper_examples/audio_arpeggiator/#part-3-python-interface","title":"Part 3: Python Interface","text":"<p>Define the Python interface to interact with the arpeggiator:</p> <pre><code>from typing import List\n\nclass AudioArpeggiator:\n    \"\"\"AudioKit-based arpeggiator with tempo and note length controls.\"\"\"\n\n    def __init__(self) -&gt; None:\n        \"\"\"Initialize the arpeggiator with default settings (120 BPM, note length 1.0).\"\"\"\n        ...\n\n    def add_note(self, pitch: int) -&gt; None:\n        \"\"\"\n        Add a note to the arpeggiator.\n\n        Args:\n            pitch: MIDI note number (0-127)\n        \"\"\"\n        ...\n\n    def remove_note(self, pitch: int) -&gt; None:\n        \"\"\"\n        Remove a note from the arpeggiator.\n\n        Args:\n            pitch: MIDI note number to remove\n        \"\"\"\n        ...\n\n    def clear_notes(self) -&gt; None:\n        \"\"\"Clear all held notes.\"\"\"\n        ...\n\n    def get_held_notes(self) -&gt; List[int]:\n        \"\"\"\n        Get the list of currently held notes.\n\n        Returns:\n            List of MIDI note numbers\n        \"\"\"\n        ...\n\n    def set_tempo(self, bpm: float) -&gt; None:\n        \"\"\"\n        Set the arpeggiator tempo.\n\n        Args:\n            bpm: Beats per minute (20-250)\n        \"\"\"\n        ...\n\n    def get_tempo(self) -&gt; float:\n        \"\"\"\n        Get the current tempo.\n\n        Returns:\n            Current BPM\n        \"\"\"\n        ...\n\n    def set_note_length(self, length: float) -&gt; None:\n        \"\"\"\n        Set the note length parameter.\n\n        Args:\n            length: Note length (0.0-1.0, where 1.0 is full note duration)\n        \"\"\"\n        ...\n\n    def get_note_length(self) -&gt; float:\n        \"\"\"\n        Get the current note length.\n\n        Returns:\n            Current note length (0.0-1.0)\n        \"\"\"\n        ...\n\n    def start(self) -&gt; None:\n        \"\"\"Start the audio engine and sequencer.\"\"\"\n        ...\n\n    def stop(self) -&gt; None:\n        \"\"\"Stop the audio engine and sequencer.\"\"\"\n        ...\n\n    def pause(self) -&gt; None:\n        \"\"\"Pause the sequencer (keeps audio engine running).\"\"\"\n        ...\n\n    def resume(self) -&gt; None:\n        \"\"\"Resume the sequencer.\"\"\"\n        ...\n</code></pre>"},{"location":"wrapper_examples/audio_arpeggiator/#usage-example","title":"Usage Example","text":"<pre><code>from audio_arpeggiator import AudioArpeggiator\nimport time\n\n# Create and start arpeggiator\narp = AudioArpeggiator()\narp.start()\n\n# Play a C major chord arpeggiated\narp.add_note(60)  # C\narp.add_note(64)  # E\narp.add_note(67)  # G\n\n# Let it play for a bit\ntime.sleep(4)\n\n# Change tempo\narp.set_tempo(180.0)  # Speed up to 180 BPM\ntime.sleep(2)\n\n# Adjust note length (shorter, more staccato)\narp.set_note_length(0.3)\ntime.sleep(2)\n\n# Add more notes (C major 7th)\narp.add_note(71)  # B\ntime.sleep(2)\n\n# Remove a note\narp.remove_note(64)  # Remove E\ntime.sleep(2)\n\n# Check what's playing\nprint(f\"Held notes: {arp.get_held_notes()}\")\nprint(f\"Current tempo: {arp.get_tempo()} BPM\")\nprint(f\"Note length: {arp.get_note_length()}\")\n\n# Clear and play new pattern\narp.clear_notes()\narp.add_note(57)  # A\narp.add_note(60)  # C\narp.add_note(64)  # E\narp.add_note(69)  # A (octave)\n\ntime.sleep(4)\n\n# Pause and resume\narp.pause()\ntime.sleep(1)\narp.resume()\ntime.sleep(2)\n\n# Clean up\narp.stop()\n</code></pre>"},{"location":"wrapper_examples/audio_arpeggiator/#advanced-usage-interactive-music-app","title":"Advanced Usage: Interactive Music App","text":"<pre><code>from audio_arpeggiator import AudioArpeggiator\nimport time\n\nclass ArpeggioMusicBox:\n    \"\"\"Interactive music box with multiple arpeggiator patterns.\"\"\"\n\n    def __init__(self):\n        self.arp = AudioArpeggiator()\n        self.arp.start()\n        self.patterns = {\n            'c_major': [60, 64, 67, 72],\n            'a_minor': [57, 60, 64, 69],\n            'f_major': [53, 57, 60, 65],\n            'g_major': [55, 59, 62, 67],\n        }\n\n    def play_pattern(self, name: str, duration: float = 4.0):\n        \"\"\"Play a chord pattern.\"\"\"\n        if name not in self.patterns:\n            print(f\"Unknown pattern: {name}\")\n            return\n\n        # Clear previous notes\n        self.arp.clear_notes()\n\n        # Add new pattern\n        for note in self.patterns[name]:\n            self.arp.add_note(note)\n\n        print(f\"Playing {name}: {self.arp.get_held_notes()}\")\n        time.sleep(duration)\n\n    def play_progression(self, tempo: float = 120.0):\n        \"\"\"Play a chord progression.\"\"\"\n        self.arp.set_tempo(tempo)\n        self.arp.set_note_length(0.8)\n\n        progression = ['c_major', 'a_minor', 'f_major', 'g_major']\n\n        for chord in progression:\n            self.play_pattern(chord, duration=4.0)\n\n    def improvise(self, duration: float = 10.0):\n        \"\"\"Create improvised patterns with tempo changes.\"\"\"\n        import random\n\n        start_time = time.time()\n\n        while time.time() - start_time &lt; duration:\n            # Random tempo change\n            tempo = random.uniform(80, 180)\n            self.arp.set_tempo(tempo)\n\n            # Random note length\n            note_length = random.uniform(0.2, 1.0)\n            self.arp.set_note_length(note_length)\n\n            # Random pattern\n            pattern = random.choice(list(self.patterns.keys()))\n            self.play_pattern(pattern, duration=2.0)\n\n    def stop(self):\n        \"\"\"Stop the arpeggiator.\"\"\"\n        self.arp.stop()\n\n# Example usage\nmusic_box = ArpeggioMusicBox()\n\nprint(\"Playing chord progression...\")\nmusic_box.play_progression(tempo=140)\n\nprint(\"\\nImprovising...\")\nmusic_box.improvise(duration=10)\n\nprint(\"\\nCleaning up...\")\nmusic_box.stop()\n</code></pre> <p>MIDI Note Numbers</p> <ul> <li>C4 (Middle C): 60</li> <li>Each octave: +/- 12 semitones</li> <li>Range: 0-127 (MIDI standard)</li> <li>Common chords:<ul> <li>C Major: [60, 64, 67]</li> <li>A minor: [57, 60, 64]</li> <li>G Major: [55, 59, 62]</li> </ul> </li> </ul> <p>Audio Resources</p> <p>The AppleSampler requires an instrument file to be loaded. Make sure to:</p> <ul> <li>Include <code>.exs</code> (Logic/GarageBand instrument) or <code>.sf2</code> (SoundFont) files in your app bundle</li> <li>Update the file path in <code>loadInstrument(url:)</code> to match your resources</li> <li>Handle errors when loading fails</li> </ul> <pre><code>if let fileURL = Bundle.main.url(forResource: \"yourInstrument\", withExtension: \"exs\") {\n    try instrument.loadInstrument(url: fileURL)\n}\n</code></pre> <p>Arpeggiator Algorithm</p> <p>The arpeggiator uses an ascending-descending pattern:</p> <ol> <li>Plays notes in ascending order until reaching the highest note</li> <li>Switches to descending order</li> <li>Plays down to the lowest note</li> <li>Switches back to ascending</li> <li>Repeats continuously</li> </ol> <p>This creates a smooth, musical pattern that's common in synthesizers and sequencers.</p> <p>Performance Considerations</p> <ul> <li>The SequencerTrack runs on a separate thread for accurate timing</li> <li>CallbackInstrument events are triggered at each sequencer step</li> <li>AudioEngine should be started before adding notes for immediate playback</li> <li>Use <code>pause()</code>/<code>resume()</code> instead of <code>stop()</code>/<code>start()</code> to avoid audio glitches</li> </ul>"},{"location":"wrapper_examples/audio_arpeggiator/#use-cases","title":"Use Cases","text":"<p>Music Production Tools <pre><code># Create a music sketching app\nfrom audio_arpeggiator import AudioArpeggiator\n\nclass MusicSketchpad:\n    def __init__(self):\n        self.arp = AudioArpeggiator()\n        self.arp.set_tempo(120)\n        self.arp.start()\n\n    def sketch_idea(self, notes, tempo=120, length=0.8):\n        \"\"\"Quickly sketch a musical idea.\"\"\"\n        self.arp.set_tempo(tempo)\n        self.arp.set_note_length(length)\n        self.arp.clear_notes()\n        for note in notes:\n            self.arp.add_note(note)\n</code></pre></p> <p>Educational Apps <pre><code># Teach music theory with interactive arpeggios\nclass MusicTheoryTeacher:\n    def __init__(self):\n        self.arp = AudioArpeggiator()\n        self.arp.start()\n\n    def demonstrate_chord(self, root, chord_type):\n        \"\"\"Demonstrate a chord by arpeggiation.\"\"\"\n        intervals = {\n            'major': [0, 4, 7],\n            'minor': [0, 3, 7],\n            'dim': [0, 3, 6],\n            'aug': [0, 4, 8],\n        }\n\n        self.arp.clear_notes()\n        for interval in intervals[chord_type]:\n            self.arp.add_note(root + interval)\n</code></pre></p> <p>Generative Music <pre><code># Create evolving ambient soundscapes\nimport random\nimport time\n\nclass AmbientGenerator:\n    def __init__(self):\n        self.arp = AudioArpeggiator()\n        self.arp.set_tempo(60)  # Slow, ambient tempo\n        self.arp.set_note_length(0.9)  # Long, flowing notes\n        self.arp.start()\n\n    def evolve(self, duration=30):\n        \"\"\"Generate evolving ambient patterns.\"\"\"\n        scale = [60, 62, 64, 67, 69, 72]  # Pentatonic scale\n\n        start = time.time()\n        while time.time() - start &lt; duration:\n            # Randomly add or remove notes\n            if random.random() &gt; 0.5 and len(self.arp.get_held_notes()) &lt; 5:\n                note = random.choice(scale)\n                self.arp.add_note(note)\n            elif self.arp.get_held_notes():\n                note = random.choice(self.arp.get_held_notes())\n                self.arp.remove_note(note)\n\n            time.sleep(random.uniform(2, 5))\n</code></pre></p>"},{"location":"wrapper_examples/battery_level/","title":"Battery level","text":""},{"location":"wrapper_examples/battery_level/#getting-started","title":"Getting started","text":"<p>This tutorial demonstrates how to monitor iOS battery level and state changes from Python using PythonSwiftLink. You'll learn how to enable battery monitoring, read the current battery level, and receive notifications when the battery state changes. This is useful for apps that need to display battery indicators, detect power outages, or respond to low power conditions.</p>"},{"location":"wrapper_examples/battery_level/#batterymonitor-part-1","title":"BatteryMonitor Part 1","text":"<p>Call Swift from Python to read battery level:</p> <p>Let's start with a basic Swift class that monitors the device's battery. iOS provides battery information through <code>UIDevice</code>, but we need to enable monitoring first.</p> BatteryMonitor.swift<pre><code>import UIKit\n\npublic class BatteryMonitor {\n\n    init() {\n        UIDevice.current.isBatteryMonitoringEnabled = true\n    }\n\n    func get_battery_level() -&gt; Float {\n        return UIDevice.current.batteryLevel\n    }\n\n    func get_battery_state() -&gt; String {\n        switch UIDevice.current.batteryState {\n        case .unknown:\n            return \"unknown\"\n        case .unplugged:\n            return \"unplugged\"\n        case .charging:\n            return \"charging\"\n        case .full:\n            return \"full\"\n        @unknown default:\n            return \"unknown\"\n        }\n    }\n}\n</code></pre> <p>To make this Swift class accessible from Python, we need to add PySwiftKit decorators. The <code>@PyClass</code> decorator marks the class as exportable to Python, <code>@PyInit</code> wraps the initializer, and <code>@PyMethod</code> exposes methods to Python. We also need to define a module structure using <code>@PyModule</code>.</p> <p>Here's the same class with the necessary wrappers:</p> BatteryMonitor.swift<pre><code>import UIKit\nimport PySwiftKit\nimport PySerializing\nimport PySwiftWrapper\n\n\n@PyClass\nclass BatteryMonitor {\n\n    @PyInit\n    init() {\n        UIDevice.current.isBatteryMonitoringEnabled = true\n    }\n\n    @PyMethod\n    func get_battery_level() -&gt; Float {\n        return UIDevice.current.batteryLevel\n    }\n\n    @PyMethod\n    func get_battery_state() -&gt; String {\n        switch UIDevice.current.batteryState {\n        case .unknown:\n            return \"unknown\"\n        case .unplugged:\n            return \"unplugged\"\n        case .charging:\n            return \"charging\"\n        case .full:\n            return \"full\"\n        @unknown default:\n            return \"unknown\"\n        }\n    }\n}\n\n@PyModule\nstruct battery_monitor: PyModuleProtocol {\n    static var py_classes: [any (PyClassProtocol &amp; AnyObject).Type] = [\n        BatteryMonitor.self\n    ]\n}\n</code></pre> <p>The <code>@PyModule</code> struct defines a Python module named <code>battery_monitor</code> that contains our BatteryMonitor class. The <code>py_classes</code> array lists all classes that should be available in the module.</p> <p>Once compiled, this creates a Python module that can be imported and used like any native Python class:</p> battery_monitor.py<pre><code>class BatteryMonitor:\n\n    def __init__(self): ...\n\n    def get_battery_level(self) -&gt; float: ...\n\n    def get_battery_state(self) -&gt; str: ...\n</code></pre> main.py<pre><code>from battery_monitor import BatteryMonitor\n\nmonitor = BatteryMonitor()\n\n# Get battery level (0.0 to 1.0)\nlevel = monitor.get_battery_level()\nprint(f\"Battery level: {level * 100}%\")\n\n# Get battery state\nstate = monitor.get_battery_state()\nprint(f\"Battery state: {state}\")\n</code></pre>"},{"location":"wrapper_examples/battery_level/#batterymonitor-part-2","title":"BatteryMonitor Part 2","text":"<p>Now let's implement battery level change notifications. iOS sends the <code>UIDeviceBatteryLevelDidChange</code> notification (up to once per minute) when the battery level changes. We'll register for this notification and call back to Python when changes occur.</p> <p>Make callback from Swift to Python on battery changes:</p> BatteryMonitor.swift<pre><code>import UIKit\nimport PySwiftKit\nimport PySerializing\nimport PySwiftWrapper\n\n\n@PyClass\nclass BatteryMonitor {\n\n    var _level_callback: PyPointer?\n    var _state_callback: PyPointer?\n\n    @PyInit\n    init(level_callback: PyPointer? = nil, state_callback: PyPointer? = nil) {\n        _level_callback = level_callback\n        _state_callback = state_callback\n\n        UIDevice.current.isBatteryMonitoringEnabled = true\n\n        // Register for battery level changes\n        NotificationCenter.default.addObserver(\n            self,\n            selector: #selector(batteryLevelChanged),\n            name: UIDevice.batteryLevelDidChangeNotification,\n            object: nil\n        )\n\n        // Register for battery state changes\n        NotificationCenter.default.addObserver(\n            self,\n            selector: #selector(batteryStateChanged),\n            name: UIDevice.batteryStateDidChangeNotification,\n            object: nil\n        )\n    }\n\n    @PyMethod\n    func get_battery_level() -&gt; Float {\n        return UIDevice.current.batteryLevel\n    }\n\n    @PyMethod\n    func get_battery_state() -&gt; String {\n        switch UIDevice.current.batteryState {\n        case .unknown:\n            return \"unknown\"\n        case .unplugged:\n            return \"unplugged\"\n        case .charging:\n            return \"charging\"\n        case .full:\n            return \"full\"\n        @unknown default:\n            return \"unknown\"\n        }\n    }\n\n    @objc func batteryLevelChanged(notification: NSNotification) {\n        level_changed_callback(level: UIDevice.current.batteryLevel)\n    }\n\n    @objc func batteryStateChanged(notification: NSNotification) {\n        state_changed_callback(state: get_battery_state())\n    }\n\n    /* \n    @PyCall will automatically fill out the function body.\n    By default, it targets a variable with an underscore prefix (_level_callback).\n    You can specify a different variable name using the name: parameter.\n    */\n    @PyCall\n    func level_changed_callback(level: Float)\n\n    @PyCall\n    func state_changed_callback(state: String)\n}\n\n@PyModule\nstruct battery_monitor: PyModuleProtocol {\n    static var py_classes: [any (PyClassProtocol &amp; AnyObject).Type] = [\n        BatteryMonitor.self\n    ]\n}\n</code></pre> main.py<pre><code>from battery_monitor import BatteryMonitor\n\ndef on_level_change(level: float):\n    print(f\"Battery level changed: {level * 100}%\")\n\ndef on_state_change(state: str):\n    print(f\"Battery state changed: {state}\")\n\n# Create monitor with callbacks\nmonitor = BatteryMonitor(\n    level_callback=on_level_change,\n    state_callback=on_state_change\n)\n\n# Callbacks will be triggered automatically when battery changes\n# (up to once per minute for level changes)\n\n# You can also use lambda functions\nmonitor = BatteryMonitor(\n    level_callback=lambda level: print(f\"Level: {level * 100}%\"),\n    state_callback=lambda state: print(f\"State: {state}\")\n)\n</code></pre>"},{"location":"wrapper_examples/battery_level/#batterymonitor-part-3","title":"BatteryMonitor Part 3","text":"<p>Make callback from Swift to Python by converting a Py-Function/Method into a Swift Function Closure:</p> <ul> <li>Pros<ul> <li>No need for storing a variable to call, that happens inside the closure.</li> <li>Cleaner API - callbacks are passed when needed rather than at initialization.</li> </ul> </li> <li>Cons</li> <li>By default the Swift closure can't keep a strong ref to the temporary object of the passed pyfunction, so it's important that one of the following conditions are met:         1. The callback should happen within the life cycle of the function that was passed to it.         2. If the callback is meant to be called later on, then it's important the pyfunction should be stored in Python as a strong ref that will keep the temporary object to the pyfunction alive while the callback is happening.</li> </ul> BatteryMonitor.swift<pre><code>import UIKit\nimport PySwiftKit\nimport PySerializing\nimport PySwiftWrapper\n\n\n@PyClass\nclass BatteryMonitor {\n\n    @PyInit\n    init() {\n        UIDevice.current.isBatteryMonitoringEnabled = true\n    }\n\n    @PyMethod\n    func get_battery_level() -&gt; Float {\n        return UIDevice.current.batteryLevel\n    }\n\n    @PyMethod\n    func get_battery_state() -&gt; String {\n        switch UIDevice.current.batteryState {\n        case .unknown:\n            return \"unknown\"\n        case .unplugged:\n            return \"unplugged\"\n        case .charging:\n            return \"charging\"\n        case .full:\n            return \"full\"\n        @unknown default:\n            return \"unknown\"\n        }\n    }\n\n    @PyMethod\n    func monitor_changes(\n        level_callback: @escaping (Float) -&gt; Void,\n        state_callback: @escaping (String) -&gt; Void\n    ) {\n        // Register for battery level changes\n        NotificationCenter.default.addObserver(\n            forName: UIDevice.batteryLevelDidChangeNotification,\n            object: nil,\n            queue: .main\n        ) { _ in\n            // This matches condition 1 - callback happens within the notification handler\n            level_callback(UIDevice.current.batteryLevel)\n        }\n\n        // Register for battery state changes\n        NotificationCenter.default.addObserver(\n            forName: UIDevice.batteryStateDidChangeNotification,\n            object: nil,\n            queue: .main\n        ) { [weak self] _ in\n            guard let self = self else { return }\n            // This matches condition 1 - callback happens within the notification handler\n            state_callback(self.get_battery_state())\n        }\n    }\n}\n\n@PyModule\nstruct battery_monitor: PyModuleProtocol {\n    static var py_classes: [any (PyClassProtocol &amp; AnyObject).Type] = [\n        BatteryMonitor.self\n    ]\n}\n</code></pre> main.py<pre><code>from battery_monitor import BatteryMonitor\n\ndef on_level_change(level: float):\n    print(f\"Battery level changed: {level * 100}%\")\n\ndef on_state_change(state: str):\n    print(f\"Battery state changed: {state}\")\n\nmonitor = BatteryMonitor()\n\n# Start monitoring with callbacks\nmonitor.monitor_changes(on_level_change, on_state_change)\n\n# Or with lambda functions\nmonitor.monitor_changes(\n    lambda level: print(f\"Level: {level * 100}%\"),\n    lambda state: print(f\"State: {state}\")\n)\n\n# Get current status anytime\nprint(f\"Current level: {monitor.get_battery_level() * 100}%\")\nprint(f\"Current state: {monitor.get_battery_state()}\")\n</code></pre>"},{"location":"wrapper_examples/battery_level/#use-case-power-outage-detector","title":"Use Case: Power Outage Detector","text":"<p>A practical example of using this battery monitor to detect power outages:</p> power_outage_detector.py<pre><code>from battery_monitor import BatteryMonitor\nimport time\n\nclass PowerOutageDetector:\n    def __init__(self):\n        self.monitor = BatteryMonitor()\n        self.was_charging = self.monitor.get_battery_state() == \"charging\"\n\n    def start_monitoring(self):\n        def on_state_change(state: str):\n            if self.was_charging and state == \"unplugged\":\n                print(\"\u26a0\ufe0f POWER OUTAGE DETECTED!\")\n                # Send notification, save data, etc.\n            elif not self.was_charging and state == \"charging\":\n                print(\"\u2713 Power restored\")\n\n            self.was_charging = (state == \"charging\")\n\n        self.monitor.monitor_changes(\n            level_callback=lambda level: None,  # We don't need level updates\n            state_callback=on_state_change\n        )\n\n# Usage: Keep a spare phone plugged in running this script\ndetector = PowerOutageDetector()\ndetector.start_monitoring()\n\nprint(\"Monitoring for power outages...\")\nprint(f\"Current state: {detector.monitor.get_battery_state()}\")\n</code></pre>"},{"location":"wrapper_examples/device_info/","title":"Device info","text":""},{"location":"wrapper_examples/device_info/#getting-started","title":"Getting started","text":"<p>This tutorial demonstrates how to access iOS device information from Python using PythonSwiftLink. You'll learn how to retrieve device details such as the device name, model, system version, and unique identifier. This is useful for apps that need to display device information, perform device-specific logic, or collect analytics data.</p>"},{"location":"wrapper_examples/device_info/#deviceinfo-part-1","title":"DeviceInfo Part 1","text":"<p>Call Swift from Python to read device information:</p> <p>Let's start with a basic Swift class that accesses device information. iOS provides device details through <code>UIDevice.current</code>, which gives us access to various properties about the running device.</p> DeviceInfo.swift<pre><code>import UIKit\n\npublic class DeviceInfo {\n\n    init() {\n\n    }\n\n    func get_device_name() -&gt; String {\n        return UIDevice.current.name\n    }\n\n    func get_device_model() -&gt; String {\n        return UIDevice.current.model\n    }\n\n    func get_system_name() -&gt; String {\n        return UIDevice.current.systemName\n    }\n\n    func get_system_version() -&gt; String {\n        return UIDevice.current.systemVersion\n    }\n\n    func get_device_identifier() -&gt; String {\n        return UIDevice.current.identifierForVendor?.uuidString ?? \"N/A\"\n    }\n\n    func get_device_type() -&gt; String {\n        switch UIDevice.current.userInterfaceIdiom {\n        case .phone:\n            return \"iPhone\"\n        case .pad:\n            return \"iPad\"\n        case .tv:\n            return \"Apple TV\"\n        case .carPlay:\n            return \"CarPlay\"\n        case .mac:\n            return \"Mac\"\n        case .vision:\n            return \"Vision Pro\"\n        @unknown default:\n            return \"Unknown\"\n        }\n    }\n\n    func get_all_info() -&gt; [String: String] {\n        return [\n            \"name\": get_device_name(),\n            \"model\": get_device_model(),\n            \"system_name\": get_system_name(),\n            \"system_version\": get_system_version(),\n            \"identifier\": get_device_identifier(),\n            \"device_type\": get_device_type()\n        ]\n    }\n}\n</code></pre> <p>To make this Swift class accessible from Python, we need to add PySwiftKit decorators. The <code>@PyClass</code> decorator marks the class as exportable to Python, <code>@PyInit</code> wraps the initializer, and <code>@PyMethod</code> exposes methods to Python.</p> <p>Here's the same class with the necessary wrappers:</p> DeviceInfo.swift<pre><code>import UIKit\nimport PySwiftKit\nimport PySerializing\nimport PySwiftWrapper\n\n\n@PyClass\nclass DeviceInfo {\n\n    @PyInit\n    init() {\n\n    }\n\n    @PyMethod\n    func get_device_name() -&gt; String {\n        return UIDevice.current.name\n    }\n\n    @PyMethod\n    func get_device_model() -&gt; String {\n        return UIDevice.current.model\n    }\n\n    @PyMethod\n    func get_system_name() -&gt; String {\n        return UIDevice.current.systemName\n    }\n\n    @PyMethod\n    func get_system_version() -&gt; String {\n        return UIDevice.current.systemVersion\n    }\n\n    @PyMethod\n    func get_device_identifier() -&gt; String {\n        return UIDevice.current.identifierForVendor?.uuidString ?? \"N/A\"\n    }\n\n    @PyMethod\n    func get_device_type() -&gt; String {\n        switch UIDevice.current.userInterfaceIdiom {\n        case .phone:\n            return \"iPhone\"\n        case .pad:\n            return \"iPad\"\n        case .tv:\n            return \"Apple TV\"\n        case .carPlay:\n            return \"CarPlay\"\n        case .mac:\n            return \"Mac\"\n        case .vision:\n            return \"Vision Pro\"\n        @unknown default:\n            return \"Unknown\"\n        }\n    }\n\n    @PyMethod\n    func get_all_info() -&gt; [String: String] {\n        return [\n            \"name\": get_device_name(),\n            \"model\": get_device_model(),\n            \"system_name\": get_system_name(),\n            \"system_version\": get_system_version(),\n            \"identifier\": get_device_identifier(),\n            \"device_type\": get_device_type()\n        ]\n    }\n}\n\n@PyModule\nstruct device_info: PyModuleProtocol {\n    static var py_classes: [any (PyClassProtocol &amp; AnyObject).Type] = [\n        DeviceInfo.self\n    ]\n}\n</code></pre> <p>The <code>@PyModule</code> struct defines a Python module named <code>device_info</code> that contains our DeviceInfo class. The <code>py_classes</code> array lists all classes that should be available in the module.</p> <p>Once compiled, this creates a Python module that can be imported and used like any native Python class:</p> device_info.py<pre><code>class DeviceInfo:\n\n    def __init__(self): ...\n\n    def get_device_name(self) -&gt; str: ...\n\n    def get_device_model(self) -&gt; str: ...\n\n    def get_system_name(self) -&gt; str: ...\n\n    def get_system_version(self) -&gt; str: ...\n\n    def get_device_identifier(self) -&gt; str: ...\n\n    def get_device_type(self) -&gt; str: ...\n\n    def get_all_info(self) -&gt; dict[str, str]: ...\n</code></pre>"},{"location":"wrapper_examples/device_info/#usage-examples","title":"Usage Examples","text":"<p>Here are various ways to use the DeviceInfo class in Python:</p> main.py<pre><code>from device_info import DeviceInfo\n\n# Create device info instance\ndevice = DeviceInfo()\n\n# Get individual properties\ndevice_name = device.get_device_name()\nprint(f\"Device Name: {device_name}\")\n\ndevice_model = device.get_device_model()\nprint(f\"Device Model: {device_model}\")\n\nsystem_name = device.get_system_name()\nprint(f\"System Name: {system_name}\")\n\nsystem_version = device.get_system_version()\nprint(f\"System Version: {system_version}\")\n\nidentifier = device.get_device_identifier()\nprint(f\"Device Identifier: {identifier}\")\n\ndevice_type = device.get_device_type()\nprint(f\"Device Type: {device_type}\")\n\n# Get all information at once\nall_info = device.get_all_info()\nprint(\"\\nAll Device Information:\")\nfor key, value in all_info.items():\n    print(f\"  {key}: {value}\")\n</code></pre> <p>Example output: <pre><code>Device Name: John's iPhone\nDevice Model: iPhone\nSystem Name: iOS\nSystem Version: 17.0\nDevice Identifier: 12345678-1234-1234-1234-123456789ABC\nDevice Type: iPhone\n\nAll Device Information:\n  name: John's iPhone\n  model: iPhone\n  system_name: iOS\n  system_version: 17.0\n  identifier: 12345678-1234-1234-1234-123456789ABC\n  device_type: iPhone\n</code></pre></p>"},{"location":"wrapper_examples/device_info/#use-cases","title":"Use Cases","text":""},{"location":"wrapper_examples/device_info/#device-specific-logic","title":"Device-Specific Logic","text":"adaptive_ui.py<pre><code>from device_info import DeviceInfo\n\ndevice = DeviceInfo()\n\n# Adjust UI based on device type\ndevice_type = device.get_device_type()\n\nif device_type == \"iPhone\":\n    # Use compact UI layout\n    print(\"Using compact iPhone layout\")\nelif device_type == \"iPad\":\n    # Use larger UI layout\n    print(\"Using expanded iPad layout\")\nelif device_type == \"Vision Pro\":\n    # Use spatial UI\n    print(\"Using spatial Vision Pro layout\")\n</code></pre>"},{"location":"wrapper_examples/device_info/#system-version-check","title":"System Version Check","text":"version_check.py<pre><code>from device_info import DeviceInfo\n\ndevice = DeviceInfo()\n\n# Check if device meets minimum requirements\nsystem_version = device.get_system_version()\nmajor_version = int(system_version.split('.')[0])\n\nMIN_IOS_VERSION = 15\n\nif major_version &gt;= MIN_IOS_VERSION:\n    print(f\"\u2713 iOS {system_version} is supported\")\nelse:\n    print(f\"\u2717 iOS {system_version} is not supported. Please upgrade to iOS {MIN_IOS_VERSION}+\")\n</code></pre>"},{"location":"wrapper_examples/device_info/#analytics-and-logging","title":"Analytics and Logging","text":"analytics.py<pre><code>from device_info import DeviceInfo\nimport json\n\ndevice = DeviceInfo()\n\n# Collect device info for analytics\ndef collect_analytics():\n    info = device.get_all_info()\n\n    analytics_data = {\n        \"device_info\": info,\n        \"app_version\": \"1.0.0\",\n        \"timestamp\": \"2025-11-13T12:00:00Z\"\n    }\n\n    # Send to analytics service\n    print(\"Analytics Data:\")\n    print(json.dumps(analytics_data, indent=2))\n\ncollect_analytics()\n</code></pre>"},{"location":"wrapper_examples/device_info/#device-information-display","title":"Device Information Display","text":"about_screen.py<pre><code>from device_info import DeviceInfo\n\nclass AboutScreen:\n    def __init__(self):\n        self.device = DeviceInfo()\n\n    def display_info(self):\n        info = self.device.get_all_info()\n\n        print(\"=\" * 40)\n        print(\"DEVICE INFORMATION\")\n        print(\"=\" * 40)\n        print(f\"Device:      {info['name']}\")\n        print(f\"Model:       {info['model']}\")\n        print(f\"Type:        {info['device_type']}\")\n        print(f\"OS:          {info['system_name']} {info['system_version']}\")\n        print(f\"Identifier:  {info['identifier']}\")\n        print(\"=\" * 40)\n\n# Usage\nabout = AboutScreen()\nabout.display_info()\n</code></pre>"},{"location":"wrapper_examples/device_info/#important-notes","title":"Important Notes","text":"<p>Identifier for Vendor</p> <p>The device identifier returned by <code>get_device_identifier()</code> is the <code>identifierForVendor</code>, which is unique to your app on this device. It will be the same across all apps from the same vendor, but different from other vendors' apps.</p> <p>Privacy Considerations</p> <ul> <li>The device identifier can change if the user uninstalls all apps from your vendor and then reinstalls</li> <li>Device identifiers should be handled according to privacy regulations</li> <li>Never use device identifiers as the sole method for user authentication</li> </ul> <p>Device Type Detection</p> <p>The <code>get_device_type()</code> method returns a human-readable string that's perfect for display purposes or simple device-specific logic. For more complex device detection, you may want to extend this class with additional methods.</p>"},{"location":"wrapper_examples/firebase_auth/","title":"Firebase Authentication &amp; Database","text":""},{"location":"wrapper_examples/firebase_auth/#getting-started","title":"Getting started","text":"<p>This tutorial demonstrates how to integrate Firebase Authentication and Realtime Database from Python using PythonSwiftLink. You'll learn how to implement user sign-in, sign-up, and save user data to Firebase. This is essential for building apps that require user authentication and data persistence in the cloud.</p>"},{"location":"wrapper_examples/firebase_auth/#prerequisites","title":"Prerequisites","text":"<p>Before starting, ensure you have:</p> <ol> <li>Firebase configured in your Xcode project</li> <li>Firebase SDK installed via Swift Package Manager or CocoaPods</li> <li><code>GoogleService-Info.plist</code> added to your project</li> </ol>"},{"location":"wrapper_examples/firebase_auth/#firebaseauth-part-1","title":"FirebaseAuth Part 1","text":"<p>Basic Firebase authentication with email and password:</p> <p>Let's start with a Swift class that handles Firebase authentication. This class will manage user sign-in, sign-up, and user profile creation in the Firebase Realtime Database.</p> FirebaseAuthManager.swift<pre><code>import UIKit\nimport FirebaseAuth\nimport FirebaseDatabase\n\npublic class FirebaseAuthManager {\n\n    var ref: DatabaseReference!\n\n    init() {\n        ref = Database.database().reference()\n    }\n\n    func sign_in(email: String, password: String, completion: @escaping (Bool, String?) -&gt; Void) {\n        Auth.auth().signIn(withEmail: email, password: password) { authResult, error in\n            guard let user = authResult?.user, error == nil else {\n                completion(false, error?.localizedDescription)\n                return\n            }\n            completion(true, user.uid)\n        }\n    }\n\n    func sign_up(email: String, password: String, username: String, completion: @escaping (Bool, String?) -&gt; Void) {\n        Auth.auth().createUser(withEmail: email, password: password) { authResult, error in\n            guard let user = authResult?.user, error == nil else {\n                completion(false, error?.localizedDescription)\n                return\n            }\n\n            // Save username to database\n            self.save_user_info(user: user, username: username) { success in\n                completion(success, user.uid)\n            }\n        }\n    }\n\n    func save_user_info(user: User, username: String, completion: @escaping (Bool) -&gt; Void) {\n        // Set display name\n        let changeRequest = user.createProfileChangeRequest()\n        changeRequest.displayName = username\n\n        changeRequest.commitChanges { error in\n            if let error = error {\n                print(\"Error updating profile: \\(error.localizedDescription)\")\n                completion(false)\n                return\n            }\n\n            // Save to database\n            self.ref.child(\"users\").child(user.uid).setValue([\"username\": username])\n            completion(true)\n        }\n    }\n\n    func sign_out() -&gt; Bool {\n        do {\n            try Auth.auth().signOut()\n            return true\n        } catch let error {\n            print(\"Error signing out: \\(error.localizedDescription)\")\n            return false\n        }\n    }\n\n    func get_current_user_id() -&gt; String? {\n        return Auth.auth().currentUser?.uid\n    }\n\n    func get_current_user_email() -&gt; String? {\n        return Auth.auth().currentUser?.email\n    }\n\n    func get_current_user_display_name() -&gt; String? {\n        return Auth.auth().currentUser?.displayName\n    }\n}\n</code></pre> <p>To make this accessible from Python, add PySwiftKit decorators:</p> FirebaseAuthManager.swift<pre><code>import UIKit\nimport FirebaseAuth\nimport FirebaseDatabase\nimport PySwiftKit\nimport PySerializing\nimport PySwiftWrapper\n\n\n@PyClass\nclass FirebaseAuthManager {\n\n    var ref: DatabaseReference!\n    var _sign_in_callback: PyPointer?\n    var _sign_up_callback: PyPointer?\n\n    @PyInit\n    init(sign_in_callback: PyPointer? = nil, sign_up_callback: PyPointer? = nil) {\n        ref = Database.database().reference()\n        _sign_in_callback = sign_in_callback\n        _sign_up_callback = sign_up_callback\n    }\n\n    @PyMethod\n    func sign_in(email: String, password: String) {\n        Auth.auth().signIn(withEmail: email, password: password) { authResult, error in\n            guard let user = authResult?.user, error == nil else {\n                self.on_sign_in_complete(success: false, user_id: nil, error: error?.localizedDescription ?? \"Unknown error\")\n                return\n            }\n\n            // Check if user exists in database\n            self.ref.child(\"users\").child(user.uid).observeSingleEvent(of: .value) { snapshot in\n                if snapshot.exists() {\n                    self.on_sign_in_complete(success: true, user_id: user.uid, error: nil)\n                } else {\n                    self.on_sign_in_complete(success: false, user_id: nil, error: \"User profile not found\")\n                }\n            }\n        }\n    }\n\n    @PyMethod\n    func sign_up(email: String, password: String, username: String) {\n        Auth.auth().createUser(withEmail: email, password: password) { authResult, error in\n            guard let user = authResult?.user, error == nil else {\n                self.on_sign_up_complete(success: false, user_id: nil, error: error?.localizedDescription ?? \"Unknown error\")\n                return\n            }\n\n            // Save user info\n            self.save_user_info(user: user, username: username)\n        }\n    }\n\n    func save_user_info(user: User, username: String) {\n        let changeRequest = user.createProfileChangeRequest()\n        changeRequest.displayName = username\n\n        changeRequest.commitChanges { error in\n            if let error = error {\n                self.on_sign_up_complete(success: false, user_id: nil, error: error.localizedDescription)\n                return\n            }\n\n            // Save to database\n            self.ref.child(\"users\").child(user.uid).setValue([\"username\": username])\n            self.on_sign_up_complete(success: true, user_id: user.uid, error: nil)\n        }\n    }\n\n    @PyMethod\n    func sign_out() -&gt; Bool {\n        do {\n            try Auth.auth().signOut()\n            return true\n        } catch let error {\n            print(\"Error signing out: \\(error.localizedDescription)\")\n            return false\n        }\n    }\n\n    @PyMethod\n    func get_current_user_id() -&gt; String {\n        return Auth.auth().currentUser?.uid ?? \"\"\n    }\n\n    @PyMethod\n    func get_current_user_email() -&gt; String {\n        return Auth.auth().currentUser?.email ?? \"\"\n    }\n\n    @PyMethod\n    func get_current_user_display_name() -&gt; String {\n        return Auth.auth().currentUser?.displayName ?? \"\"\n    }\n\n    @PyMethod\n    func is_signed_in() -&gt; Bool {\n        return Auth.auth().currentUser != nil\n    }\n\n    // Callback methods\n    @PyCall\n    func on_sign_in_complete(success: Bool, user_id: String?, error: String?)\n\n    @PyCall\n    func on_sign_up_complete(success: Bool, user_id: String?, error: String?)\n}\n\n@PyModule\nstruct firebase_auth: PyModuleProtocol {\n    static var py_classes: [any (PyClassProtocol &amp; AnyObject).Type] = [\n        FirebaseAuthManager.self\n    ]\n}\n</code></pre> <p>The <code>@PyModule</code> struct creates a Python module named <code>firebase_auth</code> containing the FirebaseAuthManager class.</p> <p>Firebase Configuration</p> <p>Make sure to initialize Firebase in your <code>main.swift</code> file before launching the app:</p> main.swift<pre><code>import Foundation\nimport PySwiftKit\nimport Kivy3Launcher\nimport Kivy_iOS_Module\nimport FirebaseCore\n\n// 1 - post_imports\nKivyLauncher.pyswiftImports = [\n    .ios,\n    // Add your Firebase module here\n    .init(name: \"firebase_auth\", module: firebase_auth.py_init)\n]\n\n// Initialize Firebase before launching\nFirebaseApp.configure()\n\n// 3 - main\nlet exit_status = KivyLauncher.SDLmain()\n// 5 - on_exit\nexit(exit_status)\n</code></pre> <p>Once compiled, this creates a Python module:</p> firebase_auth.py<pre><code>class FirebaseAuthManager:\n\n    def __init__(self, sign_in_callback: object = None, sign_up_callback: object = None): ...\n\n    def sign_in(self, email: str, password: str): ...\n\n    def sign_up(self, email: str, password: str, username: str): ...\n\n    def sign_out(self) -&gt; bool: ...\n\n    def get_current_user_id(self) -&gt; str: ...\n\n    def get_current_user_email(self) -&gt; str: ...\n\n    def get_current_user_display_name(self) -&gt; str: ...\n\n    def is_signed_in(self) -&gt; bool: ...\n</code></pre>"},{"location":"wrapper_examples/firebase_auth/#usage-examples","title":"Usage Examples","text":""},{"location":"wrapper_examples/firebase_auth/#basic-sign-insign-up","title":"Basic Sign In/Sign Up","text":"main.py<pre><code>from firebase_auth import FirebaseAuthManager\n\n# Callback handlers\ndef on_sign_in(success: bool, user_id: str, error: str):\n    if success:\n        print(f\"\u2713 Sign in successful! User ID: {user_id}\")\n    else:\n        print(f\"\u2717 Sign in failed: {error}\")\n\ndef on_sign_up(success: bool, user_id: str, error: str):\n    if success:\n        print(f\"\u2713 Sign up successful! User ID: {user_id}\")\n    else:\n        print(f\"\u2717 Sign up failed: {error}\")\n\n# Create auth manager with callbacks\nauth = FirebaseAuthManager(\n    sign_in_callback=on_sign_in,\n    sign_up_callback=on_sign_up\n)\n\n# Sign up new user\nauth.sign_up(\n    email=\"user@example.com\",\n    password=\"secure_password123\",\n    username=\"john_doe\"\n)\n\n# Sign in existing user\nauth.sign_in(\n    email=\"user@example.com\",\n    password=\"secure_password123\"\n)\n\n# Check current user\nif auth.is_signed_in():\n    print(f\"Current user: {auth.get_current_user_display_name()}\")\n    print(f\"Email: {auth.get_current_user_email()}\")\n    print(f\"ID: {auth.get_current_user_id()}\")\n\n# Sign out\nif auth.sign_out():\n    print(\"Successfully signed out\")\n</code></pre>"},{"location":"wrapper_examples/firebase_auth/#login-screen-example","title":"Login Screen Example","text":"login_screen.py<pre><code>from firebase_auth import FirebaseAuthManager\n\nclass LoginScreen:\n    def __init__(self):\n        self.auth = FirebaseAuthManager(\n            sign_in_callback=self.handle_sign_in,\n            sign_up_callback=self.handle_sign_up\n        )\n        self.current_user_id = None\n\n    def handle_sign_in(self, success: bool, user_id: str, error: str):\n        if success:\n            self.current_user_id = user_id\n            print(f\"Welcome back, {self.auth.get_current_user_display_name()}!\")\n            self.navigate_to_home()\n        else:\n            self.show_error(f\"Login failed: {error}\")\n\n    def handle_sign_up(self, success: bool, user_id: str, error: str):\n        if success:\n            self.current_user_id = user_id\n            print(f\"Account created for {self.auth.get_current_user_display_name()}\")\n            self.navigate_to_home()\n        else:\n            self.show_error(f\"Sign up failed: {error}\")\n\n    def login(self, email: str, password: str):\n        if not email or not password:\n            self.show_error(\"Email and password cannot be empty\")\n            return\n        self.auth.sign_in(email, password)\n\n    def register(self, email: str, password: str, username: str):\n        if not email or not password or not username:\n            self.show_error(\"All fields are required\")\n            return\n        self.auth.sign_up(email, password, username)\n\n    def logout(self):\n        if self.auth.sign_out():\n            self.current_user_id = None\n            print(\"Logged out successfully\")\n            self.navigate_to_login()\n\n    def show_error(self, message: str):\n        print(f\"Error: {message}\")\n\n    def navigate_to_home(self):\n        print(\"Navigating to home screen...\")\n\n    def navigate_to_login(self):\n        print(\"Navigating to login screen...\")\n\n# Usage\nlogin = LoginScreen()\n\n# User tries to sign up\nlogin.register(\n    email=\"newuser@example.com\",\n    password=\"password123\",\n    username=\"new_user\"\n)\n\n# User tries to login\nlogin.login(\n    email=\"newuser@example.com\",\n    password=\"password123\"\n)\n\n# User logs out\nlogin.logout()\n</code></pre>"},{"location":"wrapper_examples/firebase_auth/#user-session-manager","title":"User Session Manager","text":"session_manager.py<pre><code>from firebase_auth import FirebaseAuthManager\n\nclass SessionManager:\n    _instance = None\n\n    def __new__(cls):\n        if cls._instance is None:\n            cls._instance = super().__new__(cls)\n            cls._instance.auth = FirebaseAuthManager()\n        return cls._instance\n\n    def check_session(self) -&gt; bool:\n        \"\"\"Check if user is currently logged in\"\"\"\n        return self.auth.is_signed_in()\n\n    def get_user_info(self) -&gt; dict:\n        \"\"\"Get current user information\"\"\"\n        if not self.check_session():\n            return {}\n\n        return {\n            \"user_id\": self.auth.get_current_user_id(),\n            \"email\": self.auth.get_current_user_email(),\n            \"display_name\": self.auth.get_current_user_display_name()\n        }\n\n    def require_auth(self, func):\n        \"\"\"Decorator to require authentication\"\"\"\n        def wrapper(*args, **kwargs):\n            if not self.check_session():\n                print(\"Authentication required\")\n                return None\n            return func(*args, **kwargs)\n        return wrapper\n\n# Usage\nsession = SessionManager()\n\n@session.require_auth\ndef get_protected_data():\n    user_info = session.get_user_info()\n    print(f\"Fetching data for: {user_info['display_name']}\")\n    return {\"data\": \"sensitive information\"}\n\n# Check session\nif session.check_session():\n    user = session.get_user_info()\n    print(f\"Logged in as: {user['display_name']} ({user['email']})\")\nelse:\n    print(\"No active session\")\n\n# Try to access protected function\nresult = get_protected_data()\n</code></pre>"},{"location":"wrapper_examples/firebase_auth/#important-notes","title":"Important Notes","text":"<p>Async Operations</p> <p>Firebase authentication operations are asynchronous. Results are delivered through callbacks (<code>on_sign_in_complete</code>, <code>on_sign_up_complete</code>). Make sure to handle these callbacks appropriately in your Python code.</p> <p>Error Handling</p> <p>Always check the <code>success</code> parameter in callbacks before accessing <code>user_id</code>. The <code>error</code> parameter contains the error message when <code>success</code> is <code>false</code>.</p> <p>Database Structure</p> <p>This example saves user data in the following structure: <pre><code>users/\n  \u2514\u2500\u2500 &lt;user_id&gt;/\n        \u2514\u2500\u2500 username: \"user_display_name\"\n</code></pre></p> <p>You can extend this structure to include more user profile information.</p> <p>Security Rules</p> <p>Remember to configure Firebase Realtime Database security rules appropriately. For development, you might use:</p> <pre><code>{\n  \"rules\": {\n    \"users\": {\n      \"$uid\": {\n        \".read\": \"$uid === auth.uid\",\n        \".write\": \"$uid === auth.uid\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"wrapper_examples/hello_world/","title":"Hello world","text":""},{"location":"wrapper_examples/hello_world/#getting-started","title":"Getting started","text":"<p>This tutorial demonstrates how to create a Swift class that can be called from Python using PythonSwiftLink. You'll learn how to wrap Swift code to make it accessible from Python, including passing data between the two languages and implementing callbacks. We'll build a simple HelloWorld class that showcases the fundamental patterns you'll use when bridging Swift and Python code.</p>"},{"location":"wrapper_examples/hello_world/#helloworld-part-1","title":"HelloWorld Part 1","text":"<p>Call Swift from Python:</p> <p>Let's start with a basic Swift class that we want to use from Python. This class has a simple method that prints a string to the console.</p> HelloWorld.swift<pre><code>public class HelloWorld {\n\n    init() {\n\n    }\n\n    func send_string(text: String) {\n        print(text)\n    }\n\n}\n</code></pre> <p>To make this Swift class accessible from Python, we need to add PySwiftKit decorators. The <code>@PyClass</code> decorator marks the class as exportable to Python, <code>@PyInit</code> wraps the initializer, and <code>@PyMethod</code> exposes methods to Python. We also need to define a module structure using <code>@PyModule</code> that lists all the classes we want to export.</p> <p>Here's the same class with the necessary wrappers:</p> HelloWorld.swift<pre><code>import PySwiftKit\nimport PySerializing\nimport PySwiftWrapper\n\n\n@PyClass\nclass HelloWorld {\n\n    @PyInit\n    init() {\n\n    }\n\n    @PyMethod\n    func send_string(text: String) {\n        print(text)\n    }\n\n}\n\n@PyModule\nstruct hello_world: PyModuleProtocol {\n    static var py_classes: [any (PyClassProtocol &amp; AnyObject).Type] = [\n        HelloWorld.self\n    ]\n}\n</code></pre> <p>The <code>@PyModule</code> struct defines a Python module named <code>hello_world</code> that contains our HelloWorld class. The <code>py_classes</code> array lists all classes that should be available in the module.</p> <p>Once compiled, this creates a Python module that can be imported and used like any native Python class:</p> hello_world.py<pre><code>class HelloWorld:\n\n    def __init__(self)...\n\n    def send_string(self, text: str): ...\n</code></pre>"},{"location":"wrapper_examples/hello_world/#helloworld-part-2","title":"HelloWorld Part 2","text":"<p>Now let's explore how to implement callbacks from Swift back to Python. This is useful when you want Swift code to notify Python about events or results. We'll pass a Python function to Swift and call it from within a Swift method.</p> <p>Make callback from Swift to Python:</p> HelloWorld.swift<pre><code>@PyClass\nclass HelloWorld {\n\n    var _callback: PyPointer\n\n    @PyInit\n    init(callback: PyPointer) {\n        _callback = callback\n    }\n\n    @PyMethod\n    func send_string(text: String) {\n        callback(\n            text + \" World\"\n        )\n    }\n\n    /* \n    {} is not needed, PyCall will automatic fill out the function body\n    by default PyCall will target a variable that should be a underscored name\n    of the function, this case _callback.\n    but you can use the name: \"another_name\" in the argument input on @PyCall\n    to target another name.\n    */\n    @PyCall \n    func callback(text: String)\n\n}\n</code></pre> main.py<pre><code>from hello_world import HelloWorld\n\ndef callback(text: str):\n    print(text)\n\nhw = HelloWorld(callback)\nhw.send_string(\"Hello\")\n\nhw = HelloWorld(lambda text: print(text))\nhw.send_string(\"Hello\")\n</code></pre>"},{"location":"wrapper_examples/hello_world/#helloworld-part-3","title":"HelloWorld Part 3","text":"<p>Make callback from Swift to Python by converting a Py-Function/Method into a Swift Function Closure:</p> <ul> <li>Pros<ul> <li>No need for storing a variable to call, that happens inside the closure.</li> </ul> </li> <li>Cons</li> <li>By default the swift closure can't keep a strong ref to the temporary     object of passed pyfunction. so its important that one of the following conditions are meet         1. The callback should happen within the life cycle of the function that was passed to it.         2. If the callback is ment to be called later on, then its importamt the pyfunction should be stored in python as a strongref that will keep the temporary object to the pyfunction alive, while callback is happening.</li> </ul> HelloWorld.swift<pre><code>@PyClass\nclass HelloWorld2 {\n\n    @PyInit\n    init() {\n\n    }\n\n    @PyMethod\n    func send_string(text: String, callback: @escaping (String)-&gt;Void) {\n        // this matches condition 1\n        callback(\n            text + \" World\"\n        )\n    }\n\n}\n</code></pre> main.py<pre><code>from hello_world import HelloWorld\n\ndef callback(text: str):\n    print(text)\n\nhw = HelloWorld()\n\nhw.send_string(\"Hello\", callback)\n\nhw.send_string(\"Hello\", lambda text: print(text))\n</code></pre>"},{"location":"wrapper_examples/open_url/","title":"Opening URLs in Safari","text":""},{"location":"wrapper_examples/open_url/#getting-started","title":"Getting started","text":"<p>This tutorial demonstrates how to open URLs in Safari from Python using PythonSwiftLink. You'll learn how to launch Safari with a URL, check if a URL can be opened, and handle different URL schemes. This is useful for opening web pages, launching other apps via URL schemes, or providing external links from your Python application.</p>"},{"location":"wrapper_examples/open_url/#urlopener-part-1","title":"URLOpener Part 1","text":"<p>Call Swift from Python to open URLs:</p> <p>Let's start with a basic Swift class that opens URLs using <code>UIApplication</code>. iOS provides the <code>open(_:options:completionHandler:)</code> method to open URLs in Safari or other appropriate apps.</p> URLOpener.swift<pre><code>import UIKit\n\npublic class URLOpener {\n\n    init() {\n\n    }\n\n    func open_url(url_string: String) -&gt; Bool {\n        guard let url = URL(string: url_string) else {\n            return false\n        }\n\n        if UIApplication.shared.canOpenURL(url) {\n            UIApplication.shared.open(url)\n            return true\n        }\n        return false\n    }\n\n    func can_open_url(url_string: String) -&gt; Bool {\n        guard let url = URL(string: url_string) else {\n            return false\n        }\n        return UIApplication.shared.canOpenURL(url)\n    }\n}\n</code></pre> <p>To make this Swift class accessible from Python, we need to add PySwiftKit decorators:</p> URLOpener.swift<pre><code>import UIKit\nimport PySwiftKit\nimport PySerializing\nimport PySwiftWrapper\n\n\n@PyClass\nclass URLOpener {\n\n    @PyInit\n    init() {\n\n    }\n\n    @PyMethod\n    func open_url(url_string: String) -&gt; Bool {\n        guard let url = URL(string: url_string) else {\n            return false\n        }\n\n        if UIApplication.shared.canOpenURL(url) {\n            UIApplication.shared.open(url)\n            return true\n        }\n        return false\n    }\n\n    @PyMethod\n    func can_open_url(url_string: String) -&gt; Bool {\n        guard let url = URL(string: url_string) else {\n            return false\n        }\n        return UIApplication.shared.canOpenURL(url)\n    }\n}\n\n@PyModule\nstruct url_opener: PyModuleProtocol {\n    static var py_classes: [any (PyClassProtocol &amp; AnyObject).Type] = [\n        URLOpener.self\n    ]\n}\n</code></pre> <p>The <code>@PyModule</code> struct defines a Python module named <code>url_opener</code> that contains our URLOpener class.</p> <p>Once compiled, this creates a Python module:</p> url_opener.py<pre><code>class URLOpener:\n\n    def __init__(self): ...\n\n    def open_url(self, url_string: str) -&gt; bool: ...\n\n    def can_open_url(self, url_string: str) -&gt; bool: ...\n</code></pre>"},{"location":"wrapper_examples/open_url/#usage-examples","title":"Usage Examples","text":""},{"location":"wrapper_examples/open_url/#basic-url-opening","title":"Basic URL Opening","text":"main.py<pre><code>from url_opener import URLOpener\n\nopener = URLOpener()\n\n# Open a website in Safari\nif opener.open_url(\"https://www.apple.com\"):\n    print(\"\u2713 Opened Apple website\")\nelse:\n    print(\"\u2717 Failed to open URL\")\n\n# Check if a URL can be opened before trying\nurl = \"https://github.com\"\nif opener.can_open_url(url):\n    print(f\"Can open {url}\")\n    opener.open_url(url)\nelse:\n    print(f\"Cannot open {url}\")\n</code></pre>"},{"location":"wrapper_examples/open_url/#opening-different-url-schemes","title":"Opening Different URL Schemes","text":"url_schemes.py<pre><code>from url_opener import URLOpener\n\nopener = URLOpener()\n\n# Open various URL schemes\nurls = {\n    \"Website\": \"https://www.python.org\",\n    \"Email\": \"mailto:someone@example.com\",\n    \"Phone\": \"tel:1-234-567-8900\",\n    \"SMS\": \"sms:1-234-567-8900\",\n    \"Maps\": \"maps://?q=Apple+Park\",\n    \"Settings\": \"app-settings:\",\n}\n\nfor name, url in urls.items():\n    if opener.can_open_url(url):\n        print(f\"\u2713 {name}: Can open {url}\")\n    else:\n        print(f\"\u2717 {name}: Cannot open {url}\")\n</code></pre>"},{"location":"wrapper_examples/open_url/#url-validator","title":"URL Validator","text":"url_validator.py<pre><code>from url_opener import URLOpener\n\nclass URLValidator:\n    def __init__(self):\n        self.opener = URLOpener()\n\n    def validate_and_open(self, url: str) -&gt; tuple[bool, str]:\n        \"\"\"\n        Validate and open a URL.\n        Returns (success, message)\n        \"\"\"\n        # Basic validation\n        if not url:\n            return (False, \"URL is empty\")\n\n        if not url.startswith((\"http://\", \"https://\")):\n            return (False, \"URL must start with http:// or https://\")\n\n        # Check if iOS can open it\n        if not self.opener.can_open_url(url):\n            return (False, \"URL scheme not supported\")\n\n        # Try to open\n        if self.opener.open_url(url):\n            return (True, \"URL opened successfully\")\n        else:\n            return (False, \"Failed to open URL\")\n\n# Usage\nvalidator = URLValidator()\n\ntest_urls = [\n    \"https://www.apple.com\",\n    \"http://example.com\",\n    \"invalid-url\",\n    \"ftp://files.example.com\",  # FTP might not be supported\n]\n\nfor url in test_urls:\n    success, message = validator.validate_and_open(url)\n    print(f\"{url}: {message}\")\n</code></pre>"},{"location":"wrapper_examples/open_url/#urlopener-part-2","title":"URLOpener Part 2","text":"<p>Make callback from Swift to Python with completion handler:</p> <p>Now let's add a callback to notify Python when the URL has been opened (or failed to open). This is useful for showing loading indicators or handling errors.</p> URLOpener.swift<pre><code>import UIKit\nimport PySwiftKit\nimport PySerializing\nimport PySwiftWrapper\n\n\n@PyClass\nclass URLOpener {\n\n    var _completion_callback: PyPointer?\n\n    @PyInit\n    init(completion_callback: PyPointer? = nil) {\n        _completion_callback = completion_callback\n    }\n\n    @PyMethod\n    func open_url(url_string: String) -&gt; Bool {\n        guard let url = URL(string: url_string) else {\n            return false\n        }\n\n        if UIApplication.shared.canOpenURL(url) {\n            UIApplication.shared.open(url) { success in\n                self.on_url_opened(url: url_string, success: success)\n            }\n            return true\n        }\n        return false\n    }\n\n    @PyMethod\n    func can_open_url(url_string: String) -&gt; Bool {\n        guard let url = URL(string: url_string) else {\n            return false\n        }\n        return UIApplication.shared.canOpenURL(url)\n    }\n\n    @PyCall\n    func on_url_opened(url: String, success: Bool)\n}\n\n@PyModule\nstruct url_opener: PyModuleProtocol {\n    static var py_classes: [any (PyClassProtocol &amp; AnyObject).Type] = [\n        URLOpener.self\n    ]\n}\n</code></pre> main.py<pre><code>from url_opener import URLOpener\n\ndef on_completion(url: str, success: bool):\n    if success:\n        print(f\"\u2713 Successfully opened: {url}\")\n    else:\n        print(f\"\u2717 Failed to open: {url}\")\n\nopener = URLOpener(completion_callback=on_completion)\n\n# Open URL with callback\nopener.open_url(\"https://www.apple.com\")\n\n# Or with lambda\nopener = URLOpener(\n    completion_callback=lambda url, success: print(f\"Opened {url}: {success}\")\n)\nopener.open_url(\"https://github.com\")\n</code></pre>"},{"location":"wrapper_examples/open_url/#urlopener-part-3","title":"URLOpener Part 3","text":"<p>Advanced version with URL validation and multiple schemes:</p> URLOpener.swift<pre><code>import UIKit\nimport PySwiftKit\nimport PySerializing\nimport PySwiftWrapper\n\n\n@PyClass\nclass URLOpener {\n\n    @PyInit\n    init() {\n\n    }\n\n    @PyMethod\n    func open_url(url_string: String, completion: @escaping (String, Bool) -&gt; Void) {\n        guard let url = URL(string: url_string) else {\n            completion(url_string, false)\n            return\n        }\n\n        if UIApplication.shared.canOpenURL(url) {\n            UIApplication.shared.open(url) { success in\n                completion(url_string, success)\n            }\n        } else {\n            completion(url_string, false)\n        }\n    }\n\n    @PyMethod\n    func can_open_url(url_string: String) -&gt; Bool {\n        guard let url = URL(string: url_string) else {\n            return false\n        }\n        return UIApplication.shared.canOpenURL(url)\n    }\n\n    @PyMethod\n    func open_settings() {\n        if let url = URL(string: UIApplication.openSettingsURLString) {\n            UIApplication.shared.open(url)\n        }\n    }\n\n    @PyMethod\n    func get_scheme(url_string: String) -&gt; String {\n        guard let url = URL(string: url_string) else {\n            return \"\"\n        }\n        return url.scheme ?? \"\"\n    }\n}\n\n@PyModule\nstruct url_opener: PyModuleProtocol {\n    static var py_classes: [any (PyClassProtocol &amp; AnyObject).Type] = [\n        URLOpener.self\n    ]\n}\n</code></pre> advanced_example.py<pre><code>from url_opener import URLOpener\n\nclass LinkManager:\n    def __init__(self):\n        self.opener = URLOpener()\n        self.opened_urls = []\n\n    def open_with_tracking(self, url: str):\n        \"\"\"Open URL and track in history\"\"\"\n        def on_complete(url: str, success: bool):\n            if success:\n                self.opened_urls.append(url)\n                print(f\"\u2713 Opened: {url}\")\n                print(f\"Total opened: {len(self.opened_urls)}\")\n            else:\n                print(f\"\u2717 Failed: {url}\")\n\n        # Check scheme\n        scheme = self.opener.get_scheme(url)\n        print(f\"Scheme: {scheme}\")\n\n        # Open with completion\n        self.opener.open_url(url, on_complete)\n\n    def open_app_settings(self):\n        \"\"\"Open this app's settings page\"\"\"\n        print(\"Opening app settings...\")\n        self.opener.open_settings()\n\n    def get_history(self):\n        \"\"\"Get list of successfully opened URLs\"\"\"\n        return self.opened_urls.copy()\n\n# Usage\nmanager = LinkManager()\n\n# Open various URLs\nmanager.open_with_tracking(\"https://www.python.org\")\nmanager.open_with_tracking(\"https://github.com\")\n\n# Open app settings\nmanager.open_app_settings()\n\n# Get history\nprint(\"\\nURL History:\")\nfor url in manager.get_history():\n    print(f\"  - {url}\")\n</code></pre>"},{"location":"wrapper_examples/open_url/#practical-example-social-media-links","title":"Practical Example: Social Media Links","text":"social_media.py<pre><code>from url_opener import URLOpener\n\nclass SocialMediaOpener:\n    def __init__(self):\n        self.opener = URLOpener()\n\n        # Common social media URL schemes\n        self.platforms = {\n            \"twitter\": \"https://twitter.com/{}\",\n            \"instagram\": \"https://instagram.com/{}\",\n            \"github\": \"https://github.com/{}\",\n            \"linkedin\": \"https://linkedin.com/in/{}\",\n            \"youtube\": \"https://youtube.com/@{}\",\n        }\n\n    def open_profile(self, platform: str, username: str):\n        \"\"\"Open a social media profile\"\"\"\n        if platform not in self.platforms:\n            print(f\"Unknown platform: {platform}\")\n            return False\n\n        url = self.platforms[platform].format(username)\n\n        def on_complete(url: str, success: bool):\n            if success:\n                print(f\"\u2713 Opened {platform} profile: {username}\")\n            else:\n                print(f\"\u2717 Failed to open {platform} profile\")\n\n        self.opener.open_url(url, on_complete)\n        return True\n\n    def open_share_link(self, text: str, url: str = \"\"):\n        \"\"\"Open native share dialog\"\"\"\n        # Note: This would need additional UIActivityViewController wrapper\n        # For now, just open Twitter share\n        share_url = f\"https://twitter.com/intent/tweet?text={text}\"\n        if url:\n            share_url += f\"&amp;url={url}\"\n\n        self.opener.open_url(\n            share_url,\n            lambda u, s: print(f\"Share dialog: {'opened' if s else 'failed'}\")\n        )\n\n# Usage\nsocial = SocialMediaOpener()\n\n# Open profiles\nsocial.open_profile(\"github\", \"python\")\nsocial.open_profile(\"twitter\", \"github\")\nsocial.open_profile(\"youtube\", \"python\")\n\n# Share content\nsocial.open_share_link(\"Check out this cool project!\", \"https://github.com\")\n</code></pre>"},{"location":"wrapper_examples/open_url/#important-notes","title":"Important Notes","text":"<p>URL Schemes</p> <p>Not all URL schemes are available by default. For iOS 9+, you need to declare schemes in your app's <code>Info.plist</code> under <code>LSApplicationQueriesSchemes</code> if you want to check if other apps can handle specific schemes.</p> <pre><code>&lt;key&gt;LSApplicationQueriesSchemes&lt;/key&gt;\n&lt;array&gt;\n    &lt;string&gt;twitter&lt;/string&gt;\n    &lt;string&gt;instagram&lt;/string&gt;\n    &lt;string&gt;mailto&lt;/string&gt;\n    &lt;string&gt;tel&lt;/string&gt;\n    &lt;string&gt;sms&lt;/string&gt;\n&lt;/array&gt;\n</code></pre> <p>URL Validation</p> <p><code>can_open_url()</code> checks if the device has an app that can handle the URL scheme. It returns <code>false</code> for invalid URLs or schemes that aren't registered.</p> <p>Safari vs In-App Browser</p> <p>The <code>open()</code> method always opens URLs in Safari (external). If you want an in-app browser, you would need to wrap <code>SFSafariViewController</code> instead.</p> <p>Universal Links</p> <p>Universal Links (https:// URLs that open in your app) are handled automatically by iOS if configured. The <code>open_url()</code> method will respect this behavior.</p>"},{"location":"wrapper_examples/open_url/#common-url-schemes","title":"Common URL Schemes","text":"Scheme Description Example <code>https://</code> Web URL (Safari) <code>https://www.apple.com</code> <code>http://</code> Web URL (Safari) <code>http://example.com</code> <code>mailto:</code> Email <code>mailto:user@example.com</code> <code>tel:</code> Phone call <code>tel:1-234-567-8900</code> <code>sms:</code> Text message <code>sms:1-234-567-8900</code> <code>facetime:</code> FaceTime <code>facetime:user@example.com</code> <code>maps://</code> Apple Maps <code>maps://?q=Coffee</code> <code>app-settings:</code> App Settings <code>app-settings:</code>"},{"location":"wrapper_examples/uikit_viewcontroller/","title":"UIKit ViewController","text":"<p>This example demonstrates how to wrap UIKit ViewControllers and present them from Python. It shows how to create custom view controllers, configure their UI, and handle presentation/dismissal with callbacks.</p>"},{"location":"wrapper_examples/uikit_viewcontroller/#getting-started","title":"Getting Started","text":"<p>UIKit is Apple's primary framework for building user interfaces on iOS. This example covers:</p> <ul> <li>UIViewController - The base class for managing view hierarchies</li> <li>UILabel, UIButton - Basic UI components</li> <li>Modal Presentation - Showing view controllers</li> <li>Delegates/Callbacks - Handling user interactions and dismissal</li> </ul>"},{"location":"wrapper_examples/uikit_viewcontroller/#part-1-basic-swift-implementation","title":"Part 1: Basic Swift Implementation","text":"<p>First, here's a basic Swift implementation without PySwiftKit:</p> <pre><code>import UIKit\n\nclass CustomViewController: UIViewController {\n    var messageLabel: UILabel!\n    var closeButton: UIButton!\n\n    var message: String = \"Hello from Swift!\"\n    var onDismiss: (() -&gt; Void)?\n\n    override func viewDidLoad() {\n        super.viewDidLoad()\n\n        view.backgroundColor = .systemBackground\n\n        // Create and configure label\n        messageLabel = UILabel()\n        messageLabel.text = message\n        messageLabel.textAlignment = .center\n        messageLabel.font = .systemFont(ofSize: 24, weight: .bold)\n        messageLabel.translatesAutoresizingMaskIntoConstraints = false\n        view.addSubview(messageLabel)\n\n        // Create and configure button\n        closeButton = UIButton(type: .system)\n        closeButton.setTitle(\"Close\", for: .normal)\n        closeButton.titleLabel?.font = .systemFont(ofSize: 18)\n        closeButton.addTarget(self, action: #selector(closeButtonTapped), for: .touchUpInside)\n        closeButton.translatesAutoresizingMaskIntoConstraints = false\n        view.addSubview(closeButton)\n\n        // Layout constraints\n        NSLayoutConstraint.activate([\n            messageLabel.centerXAnchor.constraint(equalTo: view.centerXAnchor),\n            messageLabel.centerYAnchor.constraint(equalTo: view.centerYAnchor, constant: -50),\n            messageLabel.leadingAnchor.constraint(greaterThanOrEqualTo: view.leadingAnchor, constant: 20),\n            messageLabel.trailingAnchor.constraint(lessThanOrEqualTo: view.trailingAnchor, constant: -20),\n\n            closeButton.centerXAnchor.constraint(equalTo: view.centerXAnchor),\n            closeButton.topAnchor.constraint(equalTo: messageLabel.bottomAnchor, constant: 30),\n            closeButton.widthAnchor.constraint(equalToConstant: 100),\n            closeButton.heightAnchor.constraint(equalToConstant: 44)\n        ])\n    }\n\n    @objc func closeButtonTapped() {\n        dismiss(animated: true) {\n            self.onDismiss?()\n        }\n    }\n}\n\n// Helper to present the view controller\nclass ViewControllerPresenter {\n    static func present(_ viewController: UIViewController, animated: Bool = true) {\n        if let windowScene = UIApplication.shared.connectedScenes.first as? UIWindowScene,\n           let rootViewController = windowScene.windows.first?.rootViewController {\n            rootViewController.present(viewController, animated: animated)\n        }\n    }\n}\n</code></pre> <p>This creates a simple view controller with a label and close button, and provides a way to present it.</p>"},{"location":"wrapper_examples/uikit_viewcontroller/#part-2-swift-with-pyswiftkit","title":"Part 2: Swift with PySwiftKit","text":"<p>Now let's wrap it with PySwiftKit decorators:</p> <pre><code>import UIKit\nimport PythonSwiftLink\n\n@PyClass\nclass CustomViewController: UIViewController {\n    private var messageLabel: UILabel!\n    private var closeButton: UIButton!\n\n    private var message: String = \"Hello from Swift!\"\n    private var dismissCallback: PyPointer?\n\n    @PyInit\n    convenience init() {\n        self.init(nibName: nil, bundle: nil)\n    }\n\n    @PyMethod\n    func set_message(_ newMessage: String) {\n        message = newMessage\n        if isViewLoaded {\n            messageLabel.text = newMessage\n        }\n    }\n\n    @PyMethod\n    func get_message() -&gt; String {\n        return message\n    }\n\n    @PyMethod\n    func set_dismiss_callback(_ callback: PyPointer) {\n        dismissCallback = callback\n    }\n\n    override func viewDidLoad() {\n        super.viewDidLoad()\n\n        view.backgroundColor = .systemBackground\n\n        // Create and configure label\n        messageLabel = UILabel()\n        messageLabel.text = message\n        messageLabel.textAlignment = .center\n        messageLabel.font = .systemFont(ofSize: 24, weight: .bold)\n        messageLabel.numberOfLines = 0\n        messageLabel.translatesAutoresizingMaskIntoConstraints = false\n        view.addSubview(messageLabel)\n\n        // Create and configure button\n        closeButton = UIButton(type: .system)\n        closeButton.setTitle(\"Close\", for: .normal)\n        closeButton.titleLabel?.font = .systemFont(ofSize: 18)\n        closeButton.addTarget(self, action: #selector(closeButtonTapped), for: .touchUpInside)\n        closeButton.translatesAutoresizingMaskIntoConstraints = false\n        view.addSubview(closeButton)\n\n        // Layout constraints\n        NSLayoutConstraint.activate([\n            messageLabel.centerXAnchor.constraint(equalTo: view.centerXAnchor),\n            messageLabel.centerYAnchor.constraint(equalTo: view.centerYAnchor, constant: -50),\n            messageLabel.leadingAnchor.constraint(equalTo: view.leadingAnchor, constant: 20),\n            messageLabel.trailingAnchor.constraint(equalTo: view.trailingAnchor, constant: -20),\n\n            closeButton.centerXAnchor.constraint(equalTo: view.centerXAnchor),\n            closeButton.topAnchor.constraint(equalTo: messageLabel.bottomAnchor, constant: 30),\n            closeButton.widthAnchor.constraint(equalToConstant: 100),\n            closeButton.heightAnchor.constraint(equalToConstant: 44)\n        ])\n    }\n\n    @objc private func closeButtonTapped() {\n        dismiss(animated: true) { [weak self] in\n            guard let self = self, let callback = self.dismissCallback else { return }\n            callback.call()\n        }\n    }\n}\n\n@PyClass\nclass ViewControllerPresenter {\n\n    @PyInit\n    init() {}\n\n    @PyMethod\n    func present_view_controller(_ viewController: UIViewController, animated: Bool = true) {\n        DispatchQueue.main.async {\n            if let windowScene = UIApplication.shared.connectedScenes.first as? UIWindowScene,\n               let rootViewController = windowScene.windows.first?.rootViewController {\n                rootViewController.present(viewController, animated: animated)\n            }\n        }\n    }\n\n    @PyMethod\n    func present_custom_view_controller(_ message: String, animated: Bool = true, callback: PyPointer?) -&gt; CustomViewController {\n        let vc = CustomViewController()\n        vc.set_message(message)\n        if let cb = callback {\n            vc.set_dismiss_callback(cb)\n        }\n\n        DispatchQueue.main.async {\n            self.present_view_controller(vc, animated: animated)\n        }\n\n        return vc\n    }\n\n    @PyMethod\n    func dismiss_view_controller(animated: Bool = true, completion: PyPointer?) {\n        DispatchQueue.main.async {\n            if let windowScene = UIApplication.shared.connectedScenes.first as? UIWindowScene,\n               let rootViewController = windowScene.windows.first?.rootViewController {\n                rootViewController.dismiss(animated: animated) {\n                    completion?.call()\n                }\n            }\n        }\n    }\n\n    @PyMethod\n    static func get_root_view_controller() -&gt; UIViewController? {\n        if let windowScene = UIApplication.shared.connectedScenes.first as? UIWindowScene {\n            return windowScene.windows.first?.rootViewController\n        }\n        return nil\n    }\n}\n\n@PyModule\nclass UIKitModule {\n    static func registerTypes() {\n        CustomViewController.register()\n        ViewControllerPresenter.register()\n    }\n}\n</code></pre> <p>UIKit Thread Safety</p> <p>All UI operations in UIKit must happen on the main thread. This is why we wrap presentation calls in <code>DispatchQueue.main.async</code>. PySwiftKit handles this automatically for most operations, but it's good practice to be explicit.</p>"},{"location":"wrapper_examples/uikit_viewcontroller/#part-3-python-interface","title":"Part 3: Python Interface","text":"<p>Define the Python interface for presenting view controllers:</p> <pre><code>from typing import Optional, Callable\n\nclass CustomViewController:\n    \"\"\"A custom UIViewController with a message and close button.\"\"\"\n\n    def __init__(self) -&gt; None:\n        \"\"\"Initialize a new CustomViewController.\"\"\"\n        ...\n\n    def set_message(self, message: str) -&gt; None:\n        \"\"\"\n        Set the message displayed in the view controller.\n\n        Args:\n            message: The text to display\n        \"\"\"\n        ...\n\n    def get_message(self) -&gt; str:\n        \"\"\"\n        Get the current message.\n\n        Returns:\n            The current message text\n        \"\"\"\n        ...\n\n    def set_dismiss_callback(self, callback: Callable[[], None]) -&gt; None:\n        \"\"\"\n        Set a callback to be called when the view controller is dismissed.\n\n        Args:\n            callback: Function to call on dismissal\n        \"\"\"\n        ...\n\n\nclass ViewControllerPresenter:\n    \"\"\"Helper class for presenting UIKit view controllers.\"\"\"\n\n    def __init__(self) -&gt; None:\n        \"\"\"Initialize the presenter.\"\"\"\n        ...\n\n    def present_view_controller(\n        self, \n        view_controller: 'UIViewController', \n        animated: bool = True\n    ) -&gt; None:\n        \"\"\"\n        Present any UIViewController.\n\n        Args:\n            view_controller: The view controller to present\n            animated: Whether to animate the presentation\n        \"\"\"\n        ...\n\n    def present_custom_view_controller(\n        self,\n        message: str,\n        animated: bool = True,\n        callback: Optional[Callable[[], None]] = None\n    ) -&gt; CustomViewController:\n        \"\"\"\n        Create and present a CustomViewController.\n\n        Args:\n            message: The message to display\n            animated: Whether to animate the presentation\n            callback: Optional callback for when dismissed\n\n        Returns:\n            The created view controller instance\n        \"\"\"\n        ...\n\n    def dismiss_view_controller(\n        self,\n        animated: bool = True,\n        completion: Optional[Callable[[], None]] = None\n    ) -&gt; None:\n        \"\"\"\n        Dismiss the currently presented view controller.\n\n        Args:\n            animated: Whether to animate the dismissal\n            completion: Optional callback after dismissal\n        \"\"\"\n        ...\n\n    @staticmethod\n    def get_root_view_controller() -&gt; Optional['UIViewController']:\n        \"\"\"\n        Get the root view controller of the application.\n\n        Returns:\n            The root view controller or None\n        \"\"\"\n        ...\n</code></pre>"},{"location":"wrapper_examples/uikit_viewcontroller/#usage-example","title":"Usage Example","text":"<pre><code>from uikit_wrapper import ViewControllerPresenter, CustomViewController\nimport time\n\n# Create a presenter\npresenter = ViewControllerPresenter()\n\n# Example 1: Present a simple view controller\ndef on_dismiss():\n    print(\"View controller was dismissed!\")\n\nvc = presenter.present_custom_view_controller(\n    message=\"Hello from Python!\",\n    animated=True,\n    callback=on_dismiss\n)\n\n# Wait a bit, then update the message\ntime.sleep(2)\nvc.set_message(\"Message updated from Python!\")\n\n# Example 2: Create view controller first, configure, then present\nvc2 = CustomViewController()\nvc2.set_message(\"Pre-configured message\")\nvc2.set_dismiss_callback(lambda: print(\"VC2 dismissed\"))\n\npresenter.present_view_controller(vc2, animated=True)\n\n# Example 3: Dismiss programmatically\ntime.sleep(3)\npresenter.dismiss_view_controller(\n    animated=True,\n    completion=lambda: print(\"Dismissal complete\")\n)\n</code></pre>"},{"location":"wrapper_examples/uikit_viewcontroller/#advanced-usage-alert-dialog-wrapper","title":"Advanced Usage: Alert Dialog Wrapper","text":"<pre><code>from uikit_wrapper import ViewControllerPresenter\n\nclass AlertDialog:\n    \"\"\"Wrapper for presenting UIAlertController-style dialogs.\"\"\"\n\n    def __init__(self):\n        self.presenter = ViewControllerPresenter()\n\n    def show_message(\n        self,\n        title: str,\n        message: str,\n        button_text: str = \"OK\",\n        callback: callable = None\n    ):\n        \"\"\"Show a simple message dialog.\"\"\"\n        def on_dismiss():\n            print(f\"Alert dismissed: {title}\")\n            if callback:\n                callback()\n\n        vc = self.presenter.present_custom_view_controller(\n            message=f\"{title}\\n\\n{message}\",\n            animated=True,\n            callback=on_dismiss\n        )\n        return vc\n\n    def show_confirmation(\n        self,\n        title: str,\n        message: str,\n        on_confirm: callable = None,\n        on_cancel: callable = None\n    ):\n        \"\"\"Show a confirmation dialog (simplified example).\"\"\"\n        # In a real implementation, you'd create a custom VC with two buttons\n        def on_dismiss():\n            print(f\"Confirmation dialog dismissed: {title}\")\n            if on_confirm:\n                on_confirm()\n\n        vc = self.presenter.present_custom_view_controller(\n            message=f\"{title}\\n\\n{message}\\n\\nTap Close to confirm\",\n            animated=True,\n            callback=on_dismiss\n        )\n        return vc\n\n# Usage\nalert = AlertDialog()\n\n# Simple message\nalert.show_message(\n    title=\"Success\",\n    message=\"Your operation completed successfully!\",\n    callback=lambda: print(\"User acknowledged success\")\n)\n\n# Confirmation\ntime.sleep(3)\nalert.show_confirmation(\n    title=\"Delete Item\",\n    message=\"Are you sure you want to delete this item?\",\n    on_confirm=lambda: print(\"User confirmed deletion\"),\n    on_cancel=lambda: print(\"User cancelled\")\n)\n</code></pre>"},{"location":"wrapper_examples/uikit_viewcontroller/#advanced-usage-custom-form-view-controller","title":"Advanced Usage: Custom Form View Controller","text":"<pre><code>import UIKit\nimport PythonSwiftLink\n\n@PyClass\nclass FormViewController: UIViewController {\n    private var nameTextField: UITextField!\n    private var emailTextField: UITextField!\n    private var submitButton: UIButton!\n\n    private var submitCallback: PyPointer?\n\n    @PyInit\n    convenience init() {\n        self.init(nibName: nil, bundle: nil)\n    }\n\n    @PyMethod\n    func set_submit_callback(_ callback: PyPointer) {\n        submitCallback = callback\n    }\n\n    override func viewDidLoad() {\n        super.viewDidLoad()\n\n        view.backgroundColor = .systemBackground\n\n        // Title label\n        let titleLabel = UILabel()\n        titleLabel.text = \"User Information\"\n        titleLabel.font = .systemFont(ofSize: 28, weight: .bold)\n        titleLabel.textAlignment = .center\n        titleLabel.translatesAutoresizingMaskIntoConstraints = false\n        view.addSubview(titleLabel)\n\n        // Name field\n        nameTextField = UITextField()\n        nameTextField.placeholder = \"Name\"\n        nameTextField.borderStyle = .roundedRect\n        nameTextField.translatesAutoresizingMaskIntoConstraints = false\n        view.addSubview(nameTextField)\n\n        // Email field\n        emailTextField = UITextField()\n        emailTextField.placeholder = \"Email\"\n        emailTextField.keyboardType = .emailAddress\n        emailTextField.borderStyle = .roundedRect\n        emailTextField.translatesAutoresizingMaskIntoConstraints = false\n        view.addSubview(emailTextField)\n\n        // Submit button\n        submitButton = UIButton(type: .system)\n        submitButton.setTitle(\"Submit\", for: .normal)\n        submitButton.titleLabel?.font = .systemFont(ofSize: 18, weight: .semibold)\n        submitButton.backgroundColor = .systemBlue\n        submitButton.setTitleColor(.white, for: .normal)\n        submitButton.layer.cornerRadius = 8\n        submitButton.addTarget(self, action: #selector(submitTapped), for: .touchUpInside)\n        submitButton.translatesAutoresizingMaskIntoConstraints = false\n        view.addSubview(submitButton)\n\n        // Layout\n        NSLayoutConstraint.activate([\n            titleLabel.topAnchor.constraint(equalTo: view.safeAreaLayoutGuide.topAnchor, constant: 40),\n            titleLabel.centerXAnchor.constraint(equalTo: view.centerXAnchor),\n\n            nameTextField.topAnchor.constraint(equalTo: titleLabel.bottomAnchor, constant: 40),\n            nameTextField.leadingAnchor.constraint(equalTo: view.leadingAnchor, constant: 20),\n            nameTextField.trailingAnchor.constraint(equalTo: view.trailingAnchor, constant: -20),\n            nameTextField.heightAnchor.constraint(equalToConstant: 44),\n\n            emailTextField.topAnchor.constraint(equalTo: nameTextField.bottomAnchor, constant: 20),\n            emailTextField.leadingAnchor.constraint(equalTo: view.leadingAnchor, constant: 20),\n            emailTextField.trailingAnchor.constraint(equalTo: view.trailingAnchor, constant: -20),\n            emailTextField.heightAnchor.constraint(equalToConstant: 44),\n\n            submitButton.topAnchor.constraint(equalTo: emailTextField.bottomAnchor, constant: 40),\n            submitButton.leadingAnchor.constraint(equalTo: view.leadingAnchor, constant: 20),\n            submitButton.trailingAnchor.constraint(equalTo: view.trailingAnchor, constant: -20),\n            submitButton.heightAnchor.constraint(equalToConstant: 50)\n        ])\n    }\n\n    @objc private func submitTapped() {\n        guard let name = nameTextField.text, !name.isEmpty,\n              let email = emailTextField.text, !email.isEmpty else {\n            // Could show an alert here\n            return\n        }\n\n        dismiss(animated: true) { [weak self] in\n            guard let self = self, let callback = self.submitCallback else { return }\n            callback.call(name, email)\n        }\n    }\n}\n</code></pre> <pre><code># Python interface for FormViewController\nclass FormViewController:\n    def __init__(self) -&gt; None: ...\n    def set_submit_callback(self, callback: Callable[[str, str], None]) -&gt; None: ...\n\n# Usage\ndef handle_form_submission(name: str, email: str):\n    print(f\"Form submitted!\")\n    print(f\"Name: {name}\")\n    print(f\"Email: {email}\")\n    # Process the data...\n\npresenter = ViewControllerPresenter()\nform_vc = FormViewController()\nform_vc.set_submit_callback(handle_form_submission)\npresenter.present_view_controller(form_vc, animated=True)\n</code></pre> <p>Common UIKit Patterns</p> <p>Auto Layout: Always set <code>translatesAutoresizingMaskIntoConstraints = false</code> when using constraints</p> <p>Safe Area: Use <code>view.safeAreaLayoutGuide</code> for top/bottom anchors to avoid notches</p> <p>Button Actions: Use <code>@objc</code> methods for target-action pattern</p> <p>Keyboard: Remember to handle keyboard show/hide in forms</p> <p>Memory Management</p> <p>Use <code>[weak self]</code> in closures to avoid retain cycles:</p> <pre><code>dismiss(animated: true) { [weak self] in\n    guard let self = self else { return }\n    // Use self safely here\n}\n</code></pre> <p>This is especially important with callbacks that capture view controllers.</p> <p>Presentation Styles</p> <p>UIKit offers different presentation styles:</p> <pre><code>// Full screen (default on iOS 13+)\nviewController.modalPresentationStyle = .fullScreen\n\n// Sheet (card style)\nviewController.modalPresentationStyle = .pageSheet\n\n// Form sheet (centered)\nviewController.modalPresentationStyle = .formSheet\n\n// Automatic (system chooses)\nviewController.modalPresentationStyle = .automatic\n</code></pre> <p>You can expose these as methods in your wrapper.</p>"},{"location":"wrapper_examples/uikit_viewcontroller/#use-cases","title":"Use Cases","text":"<p>User Onboarding <pre><code>class OnboardingManager:\n    def __init__(self):\n        self.presenter = ViewControllerPresenter()\n        self.current_page = 0\n        self.pages = [\n            \"Welcome to the App!\",\n            \"Here's how to get started...\",\n            \"You're all set!\"\n        ]\n\n    def show_onboarding(self):\n        def on_page_complete():\n            self.current_page += 1\n            if self.current_page &lt; len(self.pages):\n                self.show_current_page()\n            else:\n                print(\"Onboarding complete!\")\n\n        self.show_current_page()\n\n    def show_current_page(self):\n        message = self.pages[self.current_page]\n        self.presenter.present_custom_view_controller(\n            message=message,\n            callback=lambda: self.on_page_complete()\n        )\n</code></pre></p> <p>Settings/Preferences <pre><code>class SettingsScreen:\n    def __init__(self):\n        self.presenter = ViewControllerPresenter()\n\n    def show(self, on_save=None):\n        def handle_save(settings_dict):\n            print(f\"Settings saved: {settings_dict}\")\n            if on_save:\n                on_save(settings_dict)\n\n        # Create custom settings VC with form fields\n        settings_vc = CustomViewController()\n        settings_vc.set_message(\"App Settings\")\n        settings_vc.set_dismiss_callback(handle_save)\n        self.presenter.present_view_controller(settings_vc)\n</code></pre></p> <p>Error/Success Messages <pre><code>class MessagePresenter:\n    def __init__(self):\n        self.presenter = ViewControllerPresenter()\n\n    def show_error(self, error: Exception):\n        self.presenter.present_custom_view_controller(\n            message=f\"Error: {str(error)}\",\n            callback=lambda: print(\"Error acknowledged\")\n        )\n\n    def show_success(self, message: str):\n        self.presenter.present_custom_view_controller(\n            message=f\"\u2713 {message}\",\n            callback=lambda: print(\"Success acknowledged\")\n        )\n\n# Usage\nmessenger = MessagePresenter()\ntry:\n    # Some operation...\n    messenger.show_success(\"Operation completed!\")\nexcept Exception as e:\n    messenger.show_error(e)\n</code></pre></p> <p>SwiftUI Alternative</p> <p>While this example uses UIKit (the traditional iOS UI framework), modern iOS apps often use SwiftUI. PySwiftKit can wrap SwiftUI views as well, but the pattern is slightly different. UIKit is still widely used and important for:</p> <ul> <li>Legacy app support</li> <li>Complex custom UI requirements</li> <li>Integration with existing UIKit codebases</li> <li>Features not yet available in SwiftUI</li> </ul>"}]}